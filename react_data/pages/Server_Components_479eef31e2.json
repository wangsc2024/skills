{
  "url": "https://react.dev/reference/rsc/server-components",
  "title": "Server Components",
  "content": "Server Components are a new type of Component that renders ahead of time, before bundling, in an environment separate from your client app or SSR server.\n\nThis separate environment is the “server” in React Server Components. Server Components can run once at build time on your CI server, or they can be run for each request using a web server.\n\nWhile React Server Components in React 19 are stable and will not break between minor versions, the underlying APIs used to implement a React Server Components bundler or framework do not follow semver and may break between minors in React 19.x.\n\nTo support React Server Components as a bundler or framework, we recommend pinning to a specific React version, or using the Canary release. We will continue working with bundlers and frameworks to stabilize the APIs used to implement React Server Components in the future.\n\nServer components can run at build time to read from the filesystem or fetch static content, so a web server is not required. For example, you may want to read static data from a content management system.\n\nWithout Server Components, it’s common to fetch static data on the client with an Effect:\n\nThis pattern means users need to download and parse an additional 75K (gzipped) of libraries, and wait for a second request to fetch the data after the page loads, just to render static content that will not change for the lifetime of the page.\n\nWith Server Components, you can render these components once at build time:\n\nThe rendered output can then be server-side rendered (SSR) to HTML and uploaded to a CDN. When the app loads, the client will not see the original Page component, or the expensive libraries for rendering the markdown. The client will only see the rendered output:\n\nThis means the content is visible during first page load, and the bundle does not include the expensive libraries needed to render the static content.\n\nYou may notice that the Server Component above is an async function:\n\nAsync Components are a new feature of Server Components that allow you to await in render.\n\nSee Async components with Server Components below.\n\nServer Components can also run on a web server during a request for a page, letting you access your data layer without having to build an API. They are rendered before your application is bundled, and can pass data and JSX as props to Client Components.\n\nWithout Server Components, it’s common to fetch dynamic data on the client in an Effect:\n\nWith Server Components, you can read the data and render it in the component:\n\nThe bundler then combines the data, rendered Server Components and dynamic Client Components into a bundle. Optionally, that bundle can then be server-side rendered (SSR) to create the initial HTML for the page. When the page loads, the browser does not see the original Note and Author components; only the rendered output is sent to the client:\n\nServer Components can be made dynamic by re-fetching them from a server, where they can access the data and render again. This new application architecture combines the simple “request/response” mental model of server-centric Multi-Page Apps with the seamless interactivity of client-centric Single-Page Apps, giving you the best of both worlds.\n\nServer Components are not sent to the browser, so they cannot use interactive APIs like useState. To add interactivity to Server Components, you can compose them with Client Component using the \"use client\" directive.\n\nA common misunderstanding is that Server Components are denoted by \"use server\", but there is no directive for Server Components. The \"use server\" directive is used for Server Functions.\n\nFor more info, see the docs for Directives.\n\nIn the following example, the Notes Server Component imports an Expandable Client Component that uses state to toggle its expanded state:\n\nThis works by first rendering Notes as a Server Component, and then instructing the bundler to create a bundle for the Client Component Expandable. In the browser, the Client Components will see output of the Server Components passed as props:\n\nServer Components introduce a new way to write Components using async/await. When you await in an async component, React will suspend and wait for the promise to resolve before resuming rendering. This works across server/client boundaries with streaming support for Suspense.\n\nYou can even create a promise on the server, and await it on the client:\n\nThe note content is important data for the page to render, so we await it on the server. The comments are below the fold and lower-priority, so we start the promise on the server, and wait for it on the client with the use API. This will Suspend on the client, without blocking the note content from rendering.\n\nSince async components are not supported on the client, we await the promise with use.",
  "headings": [
    {
      "level": "h1",
      "text": "Server Components",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Note",
      "id": ""
    },
    {
      "level": "h4",
      "text": "How do I build support for Server Components?",
      "id": "how-do-i-build-support-for-server-components"
    },
    {
      "level": "h3",
      "text": "Server Components without a Server",
      "id": "server-components-without-a-server"
    },
    {
      "level": "h3",
      "text": "Note",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Server Components with a Server",
      "id": "server-components-with-a-server"
    },
    {
      "level": "h3",
      "text": "Adding interactivity to Server Components",
      "id": "adding-interactivity-to-server-components"
    },
    {
      "level": "h3",
      "text": "Note",
      "id": ""
    },
    {
      "level": "h4",
      "text": "There is no directive for Server Components.",
      "id": "there-is-no-directive-for-server-components"
    },
    {
      "level": "h3",
      "text": "Async components with Server Components",
      "id": "async-components-with-server-components"
    }
  ],
  "code_samples": [
    {
      "code": "// bundle.jsimport marked from 'marked'; // 35.9K (11.2K gzipped)import sanitizeHtml from 'sanitize-html'; // 206K (63.3K gzipped)function Page({page}) {  const [content, setContent] = useState('');  // NOTE: loads *after* first page render.  useEffect(() => {    fetch(`/api/content/${page}`).then((data) => {      setContent(data.content);    });  }, [page]);  return <div>{sanitizeHtml(marked(content))}</div>;}",
      "language": "jsx"
    },
    {
      "code": "// api.jsapp.get(`/api/content/:page`, async (req, res) => {  const page = req.params.page;  const content = await file.readFile(`${page}.md`);  res.send({content});});",
      "language": "javascript"
    },
    {
      "code": "import marked from 'marked'; // Not included in bundleimport sanitizeHtml from 'sanitize-html'; // Not included in bundleasync function Page({page}) {  // NOTE: loads *during* render, when the app is built.  const content = await file.readFile(`${page}.md`);  return <div>{sanitizeHtml(marked(content))}</div>;}",
      "language": "javascript"
    },
    {
      "code": "<div><!-- html for markdown --></div>",
      "language": "typescript"
    },
    {
      "code": "async function Page({page}) {  //...}",
      "language": "javascript"
    },
    {
      "code": "// bundle.jsfunction Note({id}) {  const [note, setNote] = useState('');  // NOTE: loads *after* first render.  useEffect(() => {    fetch(`/api/notes/${id}`).then(data => {      setNote(data.note);    });  }, [id]);  return (    <div>      <Author id={note.authorId} />      <p>{note}</p>    </div>  );}function Author({id}) {  const [author, setAuthor] = useState('');  // NOTE: loads *after* Note renders.  // Causing an expensive client-server waterfall.  useEffect(() => {    fetch(`/api/authors/${id}`).then(data => {      setAuthor(data.author);    });  }, [id]);  return <span>By: {author.name}</span>;}",
      "language": "jsx"
    },
    {
      "code": "// apiimport db from './database';app.get(`/api/notes/:id`, async (req, res) => {  const note = await db.notes.get(id);  res.send({note});});app.get(`/api/authors/:id`, async (req, res) => {  const author = await db.authors.get(id);  res.send({author});});",
      "language": "javascript"
    },
    {
      "code": "import db from './database';async function Note({id}) {  // NOTE: loads *during* render.  const note = await db.notes.get(id);  return (    <div>      <Author id={note.authorId} />      <p>{note}</p>    </div>  );}async function Author({id}) {  // NOTE: loads *after* Note,  // but is fast if data is co-located.  const author = await db.authors.get(id);  return <span>By: {author.name}</span>;}",
      "language": "javascript"
    },
    {
      "code": "<div>  <span>By: The React Team</span>  <p>React 19 is...</p></div>",
      "language": "html"
    },
    {
      "code": "// Server Componentimport Expandable from './Expandable';async function Notes() {  const notes = await db.notes.getAll();  return (    <div>      {notes.map(note => (        <Expandable key={note.id}>          <p note={note} />        </Expandable>      ))}    </div>  )}",
      "language": "javascript"
    },
    {
      "code": "// Client Component\"use client\"export default function Expandable({children}) {  const [expanded, setExpanded] = useState(false);  return (    <div>      <button        onClick={() => setExpanded(!expanded)}      >        Toggle      </button>      {expanded && children}    </div>  )}",
      "language": "jsx"
    },
    {
      "code": "<head>  <!-- the bundle for Client Components -->  <script src=\"bundle.js\" /></head><body>  <div>    <Expandable key={1}>      <p>this is the first note</p>    </Expandable>    <Expandable key={2}>      <p>this is the second note</p>    </Expandable>    <!--...-->  </div></body>",
      "language": "html"
    },
    {
      "code": "// Server Componentimport db from './database';async function Page({id}) {  // Will suspend the Server Component.  const note = await db.notes.get(id);  // NOTE: not awaited, will start here and await on the client.  const commentsPromise = db.comments.get(note.id);  return (    <div>      {note}      <Suspense fallback={<p>Loading Comments...</p>}>        <Comments commentsPromise={commentsPromise} />      </Suspense>    </div>  );}",
      "language": "javascript"
    },
    {
      "code": "// Client Component\"use client\";import {use} from 'react';function Comments({commentsPromise}) {  // NOTE: this will resume the promise from the server.  // It will suspend until the data is available.  const comments = use(commentsPromise);  return comments.map(comment => <p>{comment}</p>);}",
      "language": "javascript"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/learn",
    "https://react.dev/reference/react",
    "https://react.dev/reference/react/hooks",
    "https://react.dev/reference/react/useActionState",
    "https://react.dev/reference/react/useCallback",
    "https://react.dev/reference/react/useContext",
    "https://react.dev/reference/react/useDebugValue",
    "https://react.dev/reference/react/useDeferredValue",
    "https://react.dev/reference/react/useEffect",
    "https://react.dev/reference/react/useEffectEvent",
    "https://react.dev/reference/react/useId",
    "https://react.dev/reference/react/useImperativeHandle",
    "https://react.dev/reference/react/useInsertionEffect",
    "https://react.dev/reference/react/useLayoutEffect",
    "https://react.dev/reference/react/useMemo",
    "https://react.dev/reference/react/useOptimistic",
    "https://react.dev/reference/react/useReducer",
    "https://react.dev/reference/react/useRef",
    "https://react.dev/reference/react/useState",
    "https://react.dev/reference/react/useSyncExternalStore",
    "https://react.dev/reference/react/useTransition",
    "https://react.dev/reference/react/components",
    "https://react.dev/reference/react/Fragment",
    "https://react.dev/reference/react/Profiler",
    "https://react.dev/reference/react/StrictMode",
    "https://react.dev/reference/react/Suspense",
    "https://react.dev/reference/react/Activity",
    "https://react.dev/reference/react/ViewTransition",
    "https://react.dev/reference/react/apis",
    "https://react.dev/reference/react/act",
    "https://react.dev/reference/react/addTransitionType",
    "https://react.dev/reference/react/cache",
    "https://react.dev/reference/react/cacheSignal",
    "https://react.dev/reference/react/captureOwnerStack",
    "https://react.dev/reference/react/createContext",
    "https://react.dev/reference/react/lazy",
    "https://react.dev/reference/react/memo",
    "https://react.dev/reference/react/startTransition",
    "https://react.dev/reference/react/use",
    "https://react.dev/reference/react/experimental_taintObjectReference",
    "https://react.dev/reference/react/experimental_taintUniqueValue",
    "https://react.dev/reference/react-dom/hooks",
    "https://react.dev/reference/react-dom/hooks/useFormStatus",
    "https://react.dev/reference/react-dom/components",
    "https://react.dev/reference/react-dom/components/common",
    "https://react.dev/reference/react-dom/components/form",
    "https://react.dev/reference/react-dom/components/input",
    "https://react.dev/reference/react-dom/components/option",
    "https://react.dev/reference/react-dom/components/progress",
    "https://react.dev/reference/react-dom/components/select",
    "https://react.dev/reference/react-dom/components/textarea",
    "https://react.dev/reference/react-dom/components/link",
    "https://react.dev/reference/react-dom/components/meta",
    "https://react.dev/reference/react-dom/components/script",
    "https://react.dev/reference/react-dom/components/style",
    "https://react.dev/reference/react-dom/components/title",
    "https://react.dev/reference/react-dom",
    "https://react.dev/reference/react-dom/createPortal",
    "https://react.dev/reference/react-dom/flushSync",
    "https://react.dev/reference/react-dom/preconnect",
    "https://react.dev/reference/react-dom/prefetchDNS",
    "https://react.dev/reference/react-dom/preinit",
    "https://react.dev/reference/react-dom/preinitModule",
    "https://react.dev/reference/react-dom/preload",
    "https://react.dev/reference/react-dom/preloadModule",
    "https://react.dev/reference/react-dom/client",
    "https://react.dev/reference/react-dom/client/createRoot",
    "https://react.dev/reference/react-dom/client/hydrateRoot",
    "https://react.dev/reference/react-dom/server",
    "https://react.dev/reference/react-dom/server/renderToPipeableStream",
    "https://react.dev/reference/react-dom/server/renderToReadableStream",
    "https://react.dev/reference/react-dom/server/renderToStaticMarkup",
    "https://react.dev/reference/react-dom/server/renderToString",
    "https://react.dev/reference/react-dom/server/resume",
    "https://react.dev/reference/react-dom/server/resumeToPipeableStream",
    "https://react.dev/reference/react-dom/static",
    "https://react.dev/reference/react-dom/static/prerender",
    "https://react.dev/reference/react-dom/static/prerenderToNodeStream",
    "https://react.dev/reference/react-dom/static/resumeAndPrerender",
    "https://react.dev/reference/react-dom/static/resumeAndPrerenderToNodeStream",
    "https://react.dev/reference/react-compiler/configuration",
    "https://react.dev/reference/react-compiler/compilationMode",
    "https://react.dev/reference/react-compiler/gating",
    "https://react.dev/reference/react-compiler/logger",
    "https://react.dev/reference/react-compiler/panicThreshold",
    "https://react.dev/reference/react-compiler/target",
    "https://react.dev/reference/react-compiler/directives",
    "https://react.dev/reference/react-compiler/directives/use-memo",
    "https://react.dev/reference/react-compiler/directives/use-no-memo",
    "https://react.dev/reference/react-compiler/compiling-libraries",
    "https://react.dev/reference/dev-tools/react-performance-tracks",
    "https://react.dev/reference/eslint-plugin-react-hooks",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/rules-of-hooks",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/component-hook-factories",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/config",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/error-boundaries",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/gating",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/globals",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/immutability",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/incompatible-library",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/preserve-manual-memoization",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/purity",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/refs",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/set-state-in-effect",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/set-state-in-render",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/static-components",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/unsupported-syntax",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/use-memo",
    "https://react.dev/reference/rules",
    "https://react.dev/reference/rules/components-and-hooks-must-be-pure",
    "https://react.dev/reference/rules/react-calls-components-and-hooks",
    "https://react.dev/reference/rules/rules-of-hooks",
    "https://react.dev/reference/rsc/server-components",
    "https://react.dev/reference/rsc/server-functions",
    "https://react.dev/reference/rsc/directives",
    "https://react.dev/reference/rsc/use-client",
    "https://react.dev/reference/rsc/use-server",
    "https://react.dev/reference/react/legacy",
    "https://react.dev/reference/react/Children",
    "https://react.dev/reference/react/cloneElement",
    "https://react.dev/reference/react/Component",
    "https://react.dev/reference/react/createElement",
    "https://react.dev/reference/react/createRef",
    "https://react.dev/reference/react/forwardRef",
    "https://react.dev/reference/react/isValidElement",
    "https://react.dev/reference/react/PureComponent",
    "https://react.dev/learn/installation",
    "https://react.dev/learn/describing-the-ui",
    "https://react.dev/learn/adding-interactivity",
    "https://react.dev/learn/managing-state",
    "https://react.dev/learn/escape-hatches"
  ]
}