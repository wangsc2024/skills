{
  "url": "https://react.dev/reference/react-dom/client/hydrateRoot",
  "title": "hydrateRoot",
  "content": "hydrateRoot lets you display React components inside a browser DOM node whose HTML content was previously generated by react-dom/server.\n\nCall hydrateRoot to ‚Äúattach‚Äù React to existing HTML that was already rendered by React in a server environment.\n\nReact will attach to the HTML that exists inside the domNode, and take over managing the DOM inside it. An app fully built with React will usually only have one hydrateRoot call with its root component.\n\nSee more examples below.\n\ndomNode: A DOM element that was rendered as the root element on the server.\n\nreactNode: The ‚ÄúReact node‚Äù used to render the existing HTML. This will usually be a piece of JSX like <App /> which was rendered with a ReactDOM Server method such as renderToPipeableStream(<App />).\n\noptional options: An object with options for this React root.\n\nhydrateRoot returns an object with two methods: render and unmount.\n\nCall root.render to update a React component inside a hydrated React root for a browser DOM element.\n\nReact will update <App /> in the hydrated root.\n\nSee more examples below.\n\nroot.render returns undefined.\n\nCall root.unmount to destroy a rendered tree inside a React root.\n\nAn app fully built with React will usually not have any calls to root.unmount.\n\nThis is mostly useful if your React root‚Äôs DOM node (or any of its ancestors) may get removed from the DOM by some other code. For example, imagine a jQuery tab panel that removes inactive tabs from the DOM. If a tab gets removed, everything inside it (including the React roots inside) would get removed from the DOM as well. You need to tell React to ‚Äústop‚Äù managing the removed root‚Äôs content by calling root.unmount. Otherwise, the components inside the removed root won‚Äôt clean up and free up resources like subscriptions.\n\nCalling root.unmount will unmount all the components in the root and ‚Äúdetach‚Äù React from the root DOM node, including removing any event handlers or state in the tree.\n\nroot.unmount does not accept any parameters.\n\nroot.unmount returns undefined.\n\nCalling root.unmount will unmount all the components in the tree and ‚Äúdetach‚Äù React from the root DOM node.\n\nOnce you call root.unmount you cannot call root.render again on the root. Attempting to call root.render on an unmounted root will throw a ‚ÄúCannot update an unmounted root‚Äù error.\n\nIf your app‚Äôs HTML was generated by react-dom/server, you need to hydrate it on the client.\n\nThis will hydrate the server HTML inside the browser DOM node with the React component for your app. Usually, you will do it once at startup. If you use a framework, it might do this behind the scenes for you.\n\nTo hydrate your app, React will ‚Äúattach‚Äù your components‚Äô logic to the initial generated HTML from the server. Hydration turns the initial HTML snapshot from the server into a fully interactive app that runs in the browser.\n\nYou shouldn‚Äôt need to call hydrateRoot again or to call it in more places. From this point on, React will be managing the DOM of your application. To update the UI, your components will use state instead.\n\nThe React tree you pass to hydrateRoot needs to produce the same output as it did on the server.\n\nThis is important for the user experience. The user will spend some time looking at the server-generated HTML before your JavaScript code loads. Server rendering creates an illusion that the app loads faster by showing the HTML snapshot of its output. Suddenly showing different content breaks that illusion. This is why the server render output must match the initial render output on the client.\n\nThe most common causes leading to hydration errors include:\n\nReact recovers from some hydration errors, but you must fix them like other bugs. In the best case, they‚Äôll lead to a slowdown; in the worst case, event handlers can get attached to the wrong elements.\n\nApps fully built with React can render the entire document as JSX, including the <html> tag:\n\nTo hydrate the entire document, pass the document global as the first argument to hydrateRoot:\n\nIf a single element‚Äôs attribute or text content is unavoidably different between the server and the client (for example, a timestamp), you may silence the hydration mismatch warning.\n\nTo silence hydration warnings on an element, add suppressHydrationWarning={true}:\n\nThis only works one level deep, and is intended to be an escape hatch. Don‚Äôt overuse it. React will not attempt to patch mismatched text content.\n\nIf you intentionally need to render something different on the server and the client, you can do a two-pass rendering. Components that render something different on the client can read a state variable like isClient, which you can set to true in an Effect:\n\nThis way the initial render pass will render the same content as the server, avoiding mismatches, but an additional pass will happen synchronously right after hydration.\n\nThis approach makes hydration slower because your components have to render twice. Be mindful of the user experience on slow connections. The JavaScript code may load significantly later than the initial HTML render, so rendering a different UI immediately after hydration may also feel jarring to the user.\n\nAfter the root has finished hydrating, you can call root.render to update the root React component. Unlike with createRoot, you don‚Äôt usually need to do this because the initial content was already rendered as HTML.\n\nIf you call root.render at some point after hydration, and the component tree structure matches up with what was previously rendered, React will preserve the state. Notice how you can type in the input, which means that the updates from repeated render calls every second in this example are not destructive:\n\nIt is uncommon to call root.render on a hydrated root. Usually, you‚Äôll update state inside one of the components instead.\n\nBy default, React will log all errors to the console. To implement your own error reporting, you can provide the optional error handler root options onUncaughtError, onCaughtError and onRecoverableError:\n\nThe onCaughtError option is a function called with two arguments:\n\nTogether with onUncaughtError and onRecoverableError, you can implement your own error reporting system:\n\nA common mistake is to pass the options for hydrateRoot to root.render(...):\n\nTo fix, pass the root options to hydrateRoot(...), not root.render(...):",
  "headings": [
    {
      "level": "h1",
      "text": "hydrateRoot",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Reference",
      "id": "reference"
    },
    {
      "level": "h3",
      "text": "hydrateRoot(domNode, reactNode, options?)",
      "id": "hydrateroot"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "caveats"
    },
    {
      "level": "h3",
      "text": "root.render(reactNode)",
      "id": "root-render"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "root-render-parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "root-render-returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "root-render-caveats"
    },
    {
      "level": "h3",
      "text": "root.unmount()",
      "id": "root-unmount"
    },
    {
      "level": "h4",
      "text": "Parameters",
      "id": "root-unmount-parameters"
    },
    {
      "level": "h4",
      "text": "Returns",
      "id": "root-unmount-returns"
    },
    {
      "level": "h4",
      "text": "Caveats",
      "id": "root-unmount-caveats"
    },
    {
      "level": "h2",
      "text": "Usage",
      "id": "usage"
    },
    {
      "level": "h3",
      "text": "Hydrating server-rendered HTML",
      "id": "hydrating-server-rendered-html"
    },
    {
      "level": "h3",
      "text": "Pitfall",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Hydrating an entire document",
      "id": "hydrating-an-entire-document"
    },
    {
      "level": "h3",
      "text": "Suppressing unavoidable hydration mismatch errors",
      "id": "suppressing-unavoidable-hydration-mismatch-errors"
    },
    {
      "level": "h3",
      "text": "Handling different client and server content",
      "id": "handling-different-client-and-server-content"
    },
    {
      "level": "h3",
      "text": "Pitfall",
      "id": ""
    },
    {
      "level": "h3",
      "text": "Updating a hydrated root component",
      "id": "updating-a-hydrated-root-component"
    },
    {
      "level": "h3",
      "text": "Error logging in production",
      "id": "error-logging-in-production"
    },
    {
      "level": "h2",
      "text": "Troubleshooting",
      "id": "troubleshooting"
    },
    {
      "level": "h3",
      "text": "I‚Äôm getting an error: ‚ÄúYou passed a second argument to root.render‚Äù",
      "id": "im-getting-an-error-you-passed-a-second-argument-to-root-render"
    }
  ],
  "code_samples": [
    {
      "code": "const root = hydrateRoot(domNode, reactNode, options?)",
      "language": "javascript"
    },
    {
      "code": "import { hydrateRoot } from 'react-dom/client';const domNode = document.getElementById('root');const root = hydrateRoot(domNode, reactNode);",
      "language": "sql"
    },
    {
      "code": "root.render(<App />);",
      "language": "jsx"
    },
    {
      "code": "root.unmount();",
      "language": "unknown"
    },
    {
      "code": "import { hydrateRoot } from 'react-dom/client';hydrateRoot(document.getElementById('root'), <App />);",
      "language": "jsx"
    },
    {
      "code": "function App() {  return (    <html>      <head>        <meta charSet=\"utf-8\" />        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />        <link rel=\"stylesheet\" href=\"/styles.css\"></link>        <title>My app</title>      </head>      <body>        <Router />      </body>    </html>  );}",
      "language": "html"
    },
    {
      "code": "import { hydrateRoot } from 'react-dom/client';import App from './App.js';hydrateRoot(document, <App />);",
      "language": "jsx"
    },
    {
      "code": "import { hydrateRoot } from \"react-dom/client\";import App from \"./App.js\";import { reportCaughtError } from \"./reportError\";const container = document.getElementById(\"root\");const root = hydrateRoot(container, <App />, {  onCaughtError: (error, errorInfo) => {    if (error.message !== \"Known error\") {      reportCaughtError({        error,        componentStack: errorInfo.componentStack,      });    }  },});",
      "language": "jsx"
    },
    {
      "code": "// üö© Wrong: root.render only takes one argument.root.render(App, {onUncaughtError});// ‚úÖ Correct: pass options to createRoot.const root = hydrateRoot(container, <App />, {onUncaughtError});",
      "language": "jsx"
    }
  ],
  "patterns": [],
  "links": [
    "https://react.dev/learn",
    "https://react.dev/reference/react",
    "https://react.dev/reference/react/hooks",
    "https://react.dev/reference/react/useActionState",
    "https://react.dev/reference/react/useCallback",
    "https://react.dev/reference/react/useContext",
    "https://react.dev/reference/react/useDebugValue",
    "https://react.dev/reference/react/useDeferredValue",
    "https://react.dev/reference/react/useEffect",
    "https://react.dev/reference/react/useEffectEvent",
    "https://react.dev/reference/react/useId",
    "https://react.dev/reference/react/useImperativeHandle",
    "https://react.dev/reference/react/useInsertionEffect",
    "https://react.dev/reference/react/useLayoutEffect",
    "https://react.dev/reference/react/useMemo",
    "https://react.dev/reference/react/useOptimistic",
    "https://react.dev/reference/react/useReducer",
    "https://react.dev/reference/react/useRef",
    "https://react.dev/reference/react/useState",
    "https://react.dev/reference/react/useSyncExternalStore",
    "https://react.dev/reference/react/useTransition",
    "https://react.dev/reference/react/components",
    "https://react.dev/reference/react/Fragment",
    "https://react.dev/reference/react/Profiler",
    "https://react.dev/reference/react/StrictMode",
    "https://react.dev/reference/react/Suspense",
    "https://react.dev/reference/react/Activity",
    "https://react.dev/reference/react/ViewTransition",
    "https://react.dev/reference/react/apis",
    "https://react.dev/reference/react/act",
    "https://react.dev/reference/react/addTransitionType",
    "https://react.dev/reference/react/cache",
    "https://react.dev/reference/react/cacheSignal",
    "https://react.dev/reference/react/captureOwnerStack",
    "https://react.dev/reference/react/createContext",
    "https://react.dev/reference/react/lazy",
    "https://react.dev/reference/react/memo",
    "https://react.dev/reference/react/startTransition",
    "https://react.dev/reference/react/use",
    "https://react.dev/reference/react/experimental_taintObjectReference",
    "https://react.dev/reference/react/experimental_taintUniqueValue",
    "https://react.dev/reference/react-dom/hooks",
    "https://react.dev/reference/react-dom/hooks/useFormStatus",
    "https://react.dev/reference/react-dom/components",
    "https://react.dev/reference/react-dom/components/common",
    "https://react.dev/reference/react-dom/components/form",
    "https://react.dev/reference/react-dom/components/input",
    "https://react.dev/reference/react-dom/components/option",
    "https://react.dev/reference/react-dom/components/progress",
    "https://react.dev/reference/react-dom/components/select",
    "https://react.dev/reference/react-dom/components/textarea",
    "https://react.dev/reference/react-dom/components/link",
    "https://react.dev/reference/react-dom/components/meta",
    "https://react.dev/reference/react-dom/components/script",
    "https://react.dev/reference/react-dom/components/style",
    "https://react.dev/reference/react-dom/components/title",
    "https://react.dev/reference/react-dom",
    "https://react.dev/reference/react-dom/createPortal",
    "https://react.dev/reference/react-dom/flushSync",
    "https://react.dev/reference/react-dom/preconnect",
    "https://react.dev/reference/react-dom/prefetchDNS",
    "https://react.dev/reference/react-dom/preinit",
    "https://react.dev/reference/react-dom/preinitModule",
    "https://react.dev/reference/react-dom/preload",
    "https://react.dev/reference/react-dom/preloadModule",
    "https://react.dev/reference/react-dom/client",
    "https://react.dev/reference/react-dom/client/createRoot",
    "https://react.dev/reference/react-dom/client/hydrateRoot",
    "https://react.dev/reference/react-dom/server",
    "https://react.dev/reference/react-dom/server/renderToPipeableStream",
    "https://react.dev/reference/react-dom/server/renderToReadableStream",
    "https://react.dev/reference/react-dom/server/renderToStaticMarkup",
    "https://react.dev/reference/react-dom/server/renderToString",
    "https://react.dev/reference/react-dom/server/resume",
    "https://react.dev/reference/react-dom/server/resumeToPipeableStream",
    "https://react.dev/reference/react-dom/static",
    "https://react.dev/reference/react-dom/static/prerender",
    "https://react.dev/reference/react-dom/static/prerenderToNodeStream",
    "https://react.dev/reference/react-dom/static/resumeAndPrerender",
    "https://react.dev/reference/react-dom/static/resumeAndPrerenderToNodeStream",
    "https://react.dev/reference/react-compiler/configuration",
    "https://react.dev/reference/react-compiler/compilationMode",
    "https://react.dev/reference/react-compiler/gating",
    "https://react.dev/reference/react-compiler/logger",
    "https://react.dev/reference/react-compiler/panicThreshold",
    "https://react.dev/reference/react-compiler/target",
    "https://react.dev/reference/react-compiler/directives",
    "https://react.dev/reference/react-compiler/directives/use-memo",
    "https://react.dev/reference/react-compiler/directives/use-no-memo",
    "https://react.dev/reference/react-compiler/compiling-libraries",
    "https://react.dev/reference/dev-tools/react-performance-tracks",
    "https://react.dev/reference/eslint-plugin-react-hooks",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/exhaustive-deps",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/rules-of-hooks",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/component-hook-factories",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/config",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/error-boundaries",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/gating",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/globals",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/immutability",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/incompatible-library",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/preserve-manual-memoization",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/purity",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/refs",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/set-state-in-effect",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/set-state-in-render",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/static-components",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/unsupported-syntax",
    "https://react.dev/reference/eslint-plugin-react-hooks/lints/use-memo",
    "https://react.dev/reference/rules",
    "https://react.dev/reference/rules/components-and-hooks-must-be-pure",
    "https://react.dev/reference/rules/react-calls-components-and-hooks",
    "https://react.dev/reference/rules/rules-of-hooks",
    "https://react.dev/reference/rsc/server-components",
    "https://react.dev/reference/rsc/server-functions",
    "https://react.dev/reference/rsc/directives",
    "https://react.dev/reference/rsc/use-client",
    "https://react.dev/reference/rsc/use-server",
    "https://react.dev/reference/react/legacy",
    "https://react.dev/reference/react/Children",
    "https://react.dev/reference/react/cloneElement",
    "https://react.dev/reference/react/Component",
    "https://react.dev/reference/react/createElement",
    "https://react.dev/reference/react/createRef",
    "https://react.dev/reference/react/forwardRef",
    "https://react.dev/reference/react/isValidElement",
    "https://react.dev/reference/react/PureComponent",
    "https://react.dev/learn/preserving-and-resetting-state",
    "https://react.dev/learn/installation",
    "https://react.dev/learn/describing-the-ui",
    "https://react.dev/learn/adding-interactivity",
    "https://react.dev/learn/managing-state",
    "https://react.dev/learn/escape-hatches"
  ]
}