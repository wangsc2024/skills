{
  "url": "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.code_executor.html",
  "title": "autogen_core.code_executor — AutoGen",
  "content": "A code block extracted fromm an agent message.\n\nBases: ABC, ComponentBase[BaseModel]\n\nExecutes code blocks and returns the result.\n\nThis is an abstract base class for code executors. It defines the interface for executing code blocks and returning the result. A concrete implementation of this class should be provided to execute code blocks in a specific environment. For example, DockerCommandLineCodeExecutor executes code blocks in a command line environment in a Docker container.\n\nIt is recommended for subclass to be used as a context manager to ensure that resources are cleaned up properly. To do this, implement the start() and stop() methods that will be called when entering and exiting the context manager.\n\nThe logical type of the component.\n\nExecute code blocks and return the result.\n\nThis method should be implemented by the code executor.\n\ncode_blocks (List[CodeBlock]) – The code blocks to execute.\n\nCodeResult – The result of the code execution.\n\nValueError – Errors in user inputs\n\nTimeoutError – Code execution timeouts\n\nCancelledError – CancellationToken evoked during execution\n\nStart the code executor.\n\nStop the code executor and release any resources.\n\nRestart the code executor.\n\nThis method should be implemented by the code executor.\n\nThis method is called when the agent is reset.\n\nResult of a code execution.\n\nDecorate a function with package and import requirements for code execution environments.\n\nThis decorator makes a function available for reference in dynamically executed code blocks by wrapping it in a FunctionWithRequirements object that tracks its dependencies. When the decorated function is passed to a code executor, it can be imported by name in the executed code, with all dependencies automatically handled.\n\npython_packages (Sequence[str], optional) – Python packages required by the function. Can include version specifications (e.g., [“pandas>=1.0.0”]). Defaults to [].\n\nglobal_imports (Sequence[Import], optional) – Import statements required by the function. Can be strings (“numpy”), ImportFromModule objects, or Alias objects. Defaults to [].\n\nCallable[[Callable[P, T]], FunctionWithRequirements[T, P]] – A decorator that wraps the target function, preserving its functionality while registering its dependencies.\n\nautogen_core.exceptions",
  "headings": [
    {
      "level": "h1",
      "text": "autogen_core.code_executor#",
      "id": ""
    }
  ],
  "code_samples": [
    {
      "code": "import tempfile\nimport asyncio\nfrom autogen_core import CancellationToken\nfrom autogen_core.code_executor import with_requirements, CodeBlock\nfrom autogen_ext.code_executors.local import LocalCommandLineCodeExecutor\nimport pandas\n\n@with_requirements(python_packages=[\"pandas\"], global_imports=[\"pandas\"])\ndef load_data() -> pandas.DataFrame:\n    \"\"\"Load some sample data.\n\n    Returns:\n        pandas.DataFrame: A DataFrame with sample data\n    \"\"\"\n    data = {\n        \"name\": [\"John\", \"Anna\", \"Peter\", \"Linda\"],\n        \"location\": [\"New York\", \"Paris\", \"Berlin\", \"London\"],\n        \"age\": [24, 13, 53, 33],\n    }\n    return pandas.DataFrame(data)\n\nasync def run_example():\n    # The decorated function can be used in executed code\n    with tempfile.TemporaryDirectory() as temp_dir:\n        executor = LocalCommandLineCodeExecutor(work_dir=temp_dir, functions=[load_data])\n        code = f\"\"\"from {executor.functions_module} import load_data\n\n        # Use the imported function\n        data = load_data()\n        print(data['name'][0])\"\"\"\n\n        result = await executor.execute_code_blocks(\n            code_blocks=[CodeBlock(language=\"python\", code=code)],\n            cancellation_token=CancellationToken(),\n        )\n        print(result.output)  # Output: John\n\n# Run the async example\nasyncio.run(run_example())",
      "language": "python"
    },
    {
      "code": "import tempfile\nimport asyncio\nfrom autogen_core import CancellationToken\nfrom autogen_core.code_executor import with_requirements, CodeBlock\nfrom autogen_ext.code_executors.local import LocalCommandLineCodeExecutor\nimport pandas\n\n@with_requirements(python_packages=[\"pandas\"], global_imports=[\"pandas\"])\ndef load_data() -> pandas.DataFrame:\n    \"\"\"Load some sample data.\n\n    Returns:\n        pandas.DataFrame: A DataFrame with sample data\n    \"\"\"\n    data = {\n        \"name\": [\"John\", \"Anna\", \"Peter\", \"Linda\"],\n        \"location\": [\"New York\", \"Paris\", \"Berlin\", \"London\"],\n        \"age\": [24, 13, 53, 33],\n    }\n    return pandas.DataFrame(data)\n\nasync def run_example():\n    # The decorated function can be used in executed code\n    with tempfile.TemporaryDirectory() as temp_dir:\n        executor = LocalCommandLineCodeExecutor(work_dir=temp_dir, functions=[load_data])\n        code = f\"\"\"from {executor.functions_module} import load_data\n\n        # Use the imported function\n        data = load_data()\n        print(data['name'][0])\"\"\"\n\n        result = await executor.execute_code_blocks(\n            code_blocks=[CodeBlock(language=\"python\", code=code)],\n            cancellation_token=CancellationToken(),\n        )\n        print(result.output)  # Output: John\n\n# Run the async example\nasyncio.run(run_example())",
      "language": "python"
    }
  ],
  "patterns": [],
  "links": [
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.code_executor.html",
    "https://microsoft.github.io/autogen/stable/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/agentchat-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/core-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/autogenstudio-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/reference/index.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.agents.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.base.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.conditions.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.messages.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.state.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.teams.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.tools.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.ui.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_agentchat.utils.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.exceptions.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.logging.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.memory.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.model_context.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.models.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.tool_agent.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.tools.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_core.utils.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.cache_store.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.code_executors.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.experimental.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.memory.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.teams.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.ui.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.azure.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.file_surfer.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.magentic_one.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.openai.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.video_surfer.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.web_surfer.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.auth.azure.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.cache_store.diskcache.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.cache_store.redis.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.code_executors.azure.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.code_executors.docker.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.code_executors.docker_jupyter.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.code_executors.jupyter.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.code_executors.local.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.experimental.task_centric_memory.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.memory.canvas.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.memory.chromadb.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.memory.mem0.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.memory.redis.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.anthropic.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.azure.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.cache.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.llama_cpp.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.ollama.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.openai.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.replay.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.semantic_kernel.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.grpc.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.teams.magentic_one.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.azure.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.code_execution.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.graphrag.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.http.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.langchain.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.mcp.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.tools.semantic_kernel.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.video_surfer.tools.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.web_surfer.playwright_controller.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.experimental.task_centric_memory.utils.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.anthropic.config.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.azure.config.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.ollama.config.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.models.openai.config.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.grpc.protos.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.grpc.protos.agent_worker_pb2.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.grpc.protos.agent_worker_pb2_grpc.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.grpc.protos.cloudevent_pb2.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.runtimes.grpc.protos.cloudevent_pb2_grpc.html"
  ]
}