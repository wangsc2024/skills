{
  "url": "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/azure-foundry-agent.html",
  "title": "Azure AI Foundry Agent â€” AutoGen",
  "content": "In AutoGen, you can build and deploy agents that are backed by the Azure AI Foundry Agent Service using the AzureAIAgent class. Here, important aspects of the agent including the provisioned model, tools (e.g, code interpreter, bing search grounding, file search etc.), observability, and security are managed by Azure. This allows you to focus on building your agent without worrying about the underlying infrastructure.\n\nIn this guide, we will explore an example of creating an Azure AI Foundry Agent using the AzureAIAgent that can address tasks using the Azure Grounding with Bing Search tool.\n\nAn AzureAIAgent can be assigned a set of tools including Grounding with Bing Search.\n\nGrounding with Bing Search allows your Azure AI Agents to incorporate real-time public web data when generating responses. You need to create a Grounding with Bing Search resource, and then connect this resource to your Azure AI Agents. When a user sends a query, Azure AI Agents decide if Grounding with Bing Search should be leveraged or not. If so, it will leverage Bing to search over public web data and return relevant chunks. Lastly, Azure AI Agents will use returned chunks to generate a response.\n\nYou need to have an Azure subscription.\n\nYou need to have the Azure CLI installed and configured. (also login using the command az login to enable default credentials)\n\nYou need to have the autogen-ext[azure] package installed.\n\nYou can create a Grounding with Bing Search resource in the Azure portal. Note that you will need to have owner or contributor role in your subscription or resource group to create it. Once you have created your resource, you can then pass it to the Azure Foundry Agent using the resource name.\n\nIn the following example, we will create a new Azure Foundry Agent that uses the Grounding with Bing Search resource.\n\nNote that you can also provide other Azure Backed tools and local client side functions to the agent.\n\nSee the AzureAIAgent class api documentation for more details on how to create an Azure Foundry Agent.\n\nACA Dynamic Sessions Code Executor",
  "headings": [
    {
      "level": "h1",
      "text": "Azure AI Foundry Agent#",
      "id": ""
    },
    {
      "level": "h1",
      "text": "Bing Search Grounding#",
      "id": ""
    },
    {
      "level": "h2",
      "text": "Prerequisites#",
      "id": ""
    }
  ],
  "code_samples": [
    {
      "code": "# pip install \"autogen-ext[azure]\"  # For Azure AI Foundry Agent Service",
      "language": "markdown"
    },
    {
      "code": "# pip install \"autogen-ext[azure]\"  # For Azure AI Foundry Agent Service",
      "language": "markdown"
    },
    {
      "code": "import os\n\nimport dotenv\nfrom autogen_agentchat.messages import TextMessage\nfrom autogen_core import CancellationToken\nfrom autogen_ext.agents.azure import AzureAIAgent\nfrom azure.ai.agents.models import BingGroundingTool\nfrom azure.ai.projects.aio import AIProjectClient\nfrom azure.identity.aio import DefaultAzureCredential\n\ndotenv.load_dotenv()\n\n\nasync def bing_example() -> None:\n    async with DefaultAzureCredential() as credential:  # type: ignore\n        async with AIProjectClient(  # type: ignore\n            credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\")\n        ) as project_client:\n            conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\"))\n\n            bing_tool = BingGroundingTool(conn.id)\n            agent_with_bing_grounding = AzureAIAgent(\n                name=\"bing_agent\",\n                description=\"An AI assistant with Bing grounding\",\n                project_client=project_client,\n                deployment_name=\"gpt-4o\",\n                instructions=\"You are a helpful assistant.\",\n                tools=bing_tool.definitions,\n                metadata={\"source\": \"AzureAIAgent\"},\n            )\n\n            # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them.\n            # For example: \"Please provide citations for the answers\"\n\n            result = await agent_with_bing_grounding.on_messages(\n                messages=[\n                    TextMessage(\n                        content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\",\n                        source=\"user\",\n                    )\n                ],\n                cancellation_token=CancellationToken(),\n                message_limit=5,\n            )\n            print(result)\n\n\nawait bing_example()",
      "language": "python"
    },
    {
      "code": "import os\n\nimport dotenv\nfrom autogen_agentchat.messages import TextMessage\nfrom autogen_core import CancellationToken\nfrom autogen_ext.agents.azure import AzureAIAgent\nfrom azure.ai.agents.models import BingGroundingTool\nfrom azure.ai.projects.aio import AIProjectClient\nfrom azure.identity.aio import DefaultAzureCredential\n\ndotenv.load_dotenv()\n\n\nasync def bing_example() -> None:\n    async with DefaultAzureCredential() as credential:  # type: ignore\n        async with AIProjectClient(  # type: ignore\n            credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\")\n        ) as project_client:\n            conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\"))\n\n            bing_tool = BingGroundingTool(conn.id)\n            agent_with_bing_grounding = AzureAIAgent(\n                name=\"bing_agent\",\n                description=\"An AI assistant with Bing grounding\",\n                project_client=project_client,\n                deployment_name=\"gpt-4o\",\n                instructions=\"You are a helpful assistant.\",\n                tools=bing_tool.definitions,\n                metadata={\"source\": \"AzureAIAgent\"},\n            )\n\n            # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them.\n            # For example: \"Please provide citations for the answers\"\n\n            result = await agent_with_bing_grounding.on_messages(\n                messages=[\n                    TextMessage(\n                        content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\",\n                        source=\"user\",\n                    )\n                ],\n                cancellation_token=CancellationToken(),\n                message_limit=5,\n            )\n            print(result)\n\n\nawait bing_example()",
      "language": "python"
    }
  ],
  "patterns": [
    {
      "description": "Extensions Azure AI Foundry Agent Azure AI Foundry Agent# In AutoGen, you can build and deploy agents that are backed by the Azure AI Foundry Agent Service using the AzureAIAgent class. Here, important aspects of the agent including the provisioned model, tools (e.g, code interpreter, bing search grounding, file search etc.), observability, and security are managed by Azure. This allows you to focus on building your agent without worrying about the underlying infrastructure. In this guide, we will explore an example of creating an Azure AI Foundry Agent using the AzureAIAgent that can address tasks using the Azure Grounding with Bing Search tool. # pip install \"autogen-ext[azure]\" # For Azure AI Foundry Agent Service Bing Search Grounding# An AzureAIAgent can be assigned a set of tools including Grounding with Bing Search. Grounding with Bing Search allows your Azure AI Agents to incorporate real-time public web data when generating responses. You need to create a Grounding with Bing Search resource, and then connect this resource to your Azure AI Agents. When a user sends a query, Azure AI Agents decide if Grounding with Bing Search should be leveraged or not. If so, it will leverage Bing to search over public web data and return relevant chunks. Lastly, Azure AI Agents will use returned chunks to generate a response. Prerequisites# You need to have an Azure subscription. You need to have the Azure CLI installed and configured. (also login using the command az login to enable default credentials) You need to have the autogen-ext[azure] package installed. You can create a Grounding with Bing Search resource in the Azure portal. Note that you will need to have owner or contributor role in your subscription or resource group to create it. Once you have created your resource, you can then pass it to the Azure Foundry Agent using the resource name. In the following example, we will create a new Azure Foundry Agent that uses the Grounding with Bing Search resource. import os import dotenv from autogen_agentchat.messages import TextMessage from autogen_core import CancellationToken from autogen_ext.agents.azure import AzureAIAgent from azure.ai.agents.models import BingGroundingTool from azure.ai.projects.aio import AIProjectClient from azure.identity.aio import DefaultAzureCredential dotenv.load_dotenv() async def bing_example() -> None: async with DefaultAzureCredential() as credential: # type: ignore async with AIProjectClient( # type: ignore credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\") ) as project_client: conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\")) bing_tool = BingGroundingTool(conn.id) agent_with_bing_grounding = AzureAIAgent( name=\"bing_agent\", description=\"An AI assistant with Bing grounding\", project_client=project_client, deployment_name=\"gpt-4o\", instructions=\"You are a helpful assistant.\", tools=bing_tool.definitions, metadata={\"source\": \"AzureAIAgent\"}, ) # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them. # For example: \"Please provide citations for the answers\" result = await agent_with_bing_grounding.on_messages( messages=[ TextMessage( content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\", source=\"user\", ) ], cancellation_token=CancellationToken(), message_limit=5, ) print(result) await bing_example() Note that you can also provide other Azure Backed tools and local client side functions to the agent. See the AzureAIAgent class api documentation for more details on how to create an Azure Foundry Agent. previous ACA Dynamic Sessions Code Executor next AutoGen Studio On this page Azure AI Foundry Agent Bing Search Grounding Prerequisites Edit on GitHub Show Source",
      "code": "AzureAIAgent"
    },
    {
      "description": "Extensions Azure AI Foundry Agent Azure AI Foundry Agent# In AutoGen, you can build and deploy agents that are backed by the Azure AI Foundry Agent Service using the AzureAIAgent class. Here, important aspects of the agent including the provisioned model, tools (e.g, code interpreter, bing search grounding, file search etc.), observability, and security are managed by Azure. This allows you to focus on building your agent without worrying about the underlying infrastructure. In this guide, we will explore an example of creating an Azure AI Foundry Agent using the AzureAIAgent that can address tasks using the Azure Grounding with Bing Search tool. # pip install \"autogen-ext[azure]\" # For Azure AI Foundry Agent Service Bing Search Grounding# An AzureAIAgent can be assigned a set of tools including Grounding with Bing Search. Grounding with Bing Search allows your Azure AI Agents to incorporate real-time public web data when generating responses. You need to create a Grounding with Bing Search resource, and then connect this resource to your Azure AI Agents. When a user sends a query, Azure AI Agents decide if Grounding with Bing Search should be leveraged or not. If so, it will leverage Bing to search over public web data and return relevant chunks. Lastly, Azure AI Agents will use returned chunks to generate a response. Prerequisites# You need to have an Azure subscription. You need to have the Azure CLI installed and configured. (also login using the command az login to enable default credentials) You need to have the autogen-ext[azure] package installed. You can create a Grounding with Bing Search resource in the Azure portal. Note that you will need to have owner or contributor role in your subscription or resource group to create it. Once you have created your resource, you can then pass it to the Azure Foundry Agent using the resource name. In the following example, we will create a new Azure Foundry Agent that uses the Grounding with Bing Search resource. import os import dotenv from autogen_agentchat.messages import TextMessage from autogen_core import CancellationToken from autogen_ext.agents.azure import AzureAIAgent from azure.ai.agents.models import BingGroundingTool from azure.ai.projects.aio import AIProjectClient from azure.identity.aio import DefaultAzureCredential dotenv.load_dotenv() async def bing_example() -> None: async with DefaultAzureCredential() as credential: # type: ignore async with AIProjectClient( # type: ignore credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\") ) as project_client: conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\")) bing_tool = BingGroundingTool(conn.id) agent_with_bing_grounding = AzureAIAgent( name=\"bing_agent\", description=\"An AI assistant with Bing grounding\", project_client=project_client, deployment_name=\"gpt-4o\", instructions=\"You are a helpful assistant.\", tools=bing_tool.definitions, metadata={\"source\": \"AzureAIAgent\"}, ) # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them. # For example: \"Please provide citations for the answers\" result = await agent_with_bing_grounding.on_messages( messages=[ TextMessage( content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\", source=\"user\", ) ], cancellation_token=CancellationToken(), message_limit=5, ) print(result) await bing_example() Note that you can also provide other Azure Backed tools and local client side functions to the agent. See the AzureAIAgent class api documentation for more details on how to create an Azure Foundry Agent. previous ACA Dynamic Sessions Code Executor next AutoGen Studio",
      "code": "AzureAIAgent"
    },
    {
      "description": "import os import dotenv from autogen_agentchat.messages import TextMessage from autogen_core import CancellationToken from autogen_ext.agents.azure import AzureAIAgent from azure.ai.agents.models import BingGroundingTool from azure.ai.projects.aio import AIProjectClient from azure.identity.aio import DefaultAzureCredential dotenv.load_dotenv() async def bing_example() -> None: async with DefaultAzureCredential() as credential: # type: ignore async with AIProjectClient( # type: ignore credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\") ) as project_client: conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\")) bing_tool = BingGroundingTool(conn.id) agent_with_bing_grounding = AzureAIAgent( name=\"bing_agent\", description=\"An AI assistant with Bing grounding\", project_client=project_client, deployment_name=\"gpt-4o\", instructions=\"You are a helpful assistant.\", tools=bing_tool.definitions, metadata={\"source\": \"AzureAIAgent\"}, ) # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them. # For example: \"Please provide citations for the answers\" result = await agent_with_bing_grounding.on_messages( messages=[ TextMessage( content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\", source=\"user\", ) ], cancellation_token=CancellationToken(), message_limit=5, ) print(result) await bing_example()",
      "code": "import os\n\nimport dotenv\nfrom autogen_agentchat.messages import TextMessage\nfrom autogen_core import CancellationToken\nfrom autogen_ext.agents.azure import AzureAIAgent\nfrom azure.ai.agents.models import BingGroundingTool\nfrom azure.ai.projects.aio import AIProjectClient\nfrom azure.identity.aio import DefaultAzureCredential\n\ndotenv.load_dotenv()\n\n\nasync def bing_example() -> None:\n    async with DefaultAzureCredential() as credential:  # type: ignore\n        async with AIProjectClient(  # type: ignore\n            credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\")\n        ) as project_client:\n            conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\"))\n\n            bing_tool = BingGroundingTool(conn.id)\n            agent_with_bing_grounding = AzureAIAgent(\n                name=\"bing_agent\",\n                description=\"An AI assistant with Bing grounding\",\n                project_client=project_client,\n                deployment_name=\"gpt-4o\",\n                instructions=\"You are a helpful assistant.\",\n                tools=bing_tool.definitions,\n                metadata={\"source\": \"AzureAIAgent\"},\n            )\n\n            # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them.\n            # For example: \"Please provide citations for the answers\"\n\n            result = await agent_with_bing_grounding.on_messages(\n                messages=[\n                    TextMessage(\n                        content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\",\n                        source=\"user\",\n                    )\n                ],\n                cancellation_token=CancellationToken(),\n                message_limit=5,\n            )\n            print(result)\n\n\nawait bing_example()"
    },
    {
      "description": "import os import dotenv from autogen_agentchat.messages import TextMessage from autogen_core import CancellationToken from autogen_ext.agents.azure import AzureAIAgent from azure.ai.agents.models import BingGroundingTool from azure.ai.projects.aio import AIProjectClient from azure.identity.aio import DefaultAzureCredential dotenv.load_dotenv() async def bing_example() -> None: async with DefaultAzureCredential() as credential: # type: ignore async with AIProjectClient( # type: ignore credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\") ) as project_client: conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\")) bing_tool = BingGroundingTool(conn.id) agent_with_bing_grounding = AzureAIAgent( name=\"bing_agent\", description=\"An AI assistant with Bing grounding\", project_client=project_client, deployment_name=\"gpt-4o\", instructions=\"You are a helpful assistant.\", tools=bing_tool.definitions, metadata={\"source\": \"AzureAIAgent\"}, ) # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them. # For example: \"Please provide citations for the answers\" result = await agent_with_bing_grounding.on_messages( messages=[ TextMessage( content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\", source=\"user\", ) ], cancellation_token=CancellationToken(), message_limit=5, ) print(result) await bing_example()",
      "code": "import os\n\nimport dotenv\nfrom autogen_agentchat.messages import TextMessage\nfrom autogen_core import CancellationToken\nfrom autogen_ext.agents.azure import AzureAIAgent\nfrom azure.ai.agents.models import BingGroundingTool\nfrom azure.ai.projects.aio import AIProjectClient\nfrom azure.identity.aio import DefaultAzureCredential\n\ndotenv.load_dotenv()\n\n\nasync def bing_example() -> None:\n    async with DefaultAzureCredential() as credential:  # type: ignore\n        async with AIProjectClient(  # type: ignore\n            credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\")\n        ) as project_client:\n            conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\"))\n\n            bing_tool = BingGroundingTool(conn.id)\n            agent_with_bing_grounding = AzureAIAgent(\n                name=\"bing_agent\",\n                description=\"An AI assistant with Bing grounding\",\n                project_client=project_client,\n                deployment_name=\"gpt-4o\",\n                instructions=\"You are a helpful assistant.\",\n                tools=bing_tool.definitions,\n                metadata={\"source\": \"AzureAIAgent\"},\n            )\n\n            # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them.\n            # For example: \"Please provide citations for the answers\"\n\n            result = await agent_with_bing_grounding.on_messages(\n                messages=[\n                    TextMessage(\n                        content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\",\n                        source=\"user\",\n                    )\n                ],\n                cancellation_token=CancellationToken(),\n                message_limit=5,\n            )\n            print(result)\n\n\nawait bing_example()"
    },
    {
      "description": "import os import dotenv from autogen_agentchat.messages import TextMessage from autogen_core import CancellationToken from autogen_ext.agents.azure import AzureAIAgent from azure.ai.agents.models import BingGroundingTool from azure.ai.projects.aio import AIProjectClient from azure.identity.aio import DefaultAzureCredential dotenv.load_dotenv() async def bing_example() -> None: async with DefaultAzureCredential() as credential: # type: ignore async with AIProjectClient( # type: ignore credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\") ) as project_client: conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\")) bing_tool = BingGroundingTool(conn.id) agent_with_bing_grounding = AzureAIAgent( name=\"bing_agent\", description=\"An AI assistant with Bing grounding\", project_client=project_client, deployment_name=\"gpt-4o\", instructions=\"You are a helpful assistant.\", tools=bing_tool.definitions, metadata={\"source\": \"AzureAIAgent\"}, ) # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them. # For example: \"Please provide citations for the answers\" result = await agent_with_bing_grounding.on_messages( messages=[ TextMessage( content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\", source=\"user\", ) ], cancellation_token=CancellationToken(), message_limit=5, ) print(result) await bing_example()",
      "code": "import os\n\nimport dotenv\nfrom autogen_agentchat.messages import TextMessage\nfrom autogen_core import CancellationToken\nfrom autogen_ext.agents.azure import AzureAIAgent\nfrom azure.ai.agents.models import BingGroundingTool\nfrom azure.ai.projects.aio import AIProjectClient\nfrom azure.identity.aio import DefaultAzureCredential\n\ndotenv.load_dotenv()\n\n\nasync def bing_example() -> None:\n    async with DefaultAzureCredential() as credential:  # type: ignore\n        async with AIProjectClient(  # type: ignore\n            credential=credential, endpoint=os.getenv(\"AZURE_PROJECT_ENDPOINT\", \"\")\n        ) as project_client:\n            conn = await project_client.connections.get(name=os.getenv(\"BING_CONNECTION_NAME\", \"\"))\n\n            bing_tool = BingGroundingTool(conn.id)\n            agent_with_bing_grounding = AzureAIAgent(\n                name=\"bing_agent\",\n                description=\"An AI assistant with Bing grounding\",\n                project_client=project_client,\n                deployment_name=\"gpt-4o\",\n                instructions=\"You are a helpful assistant.\",\n                tools=bing_tool.definitions,\n                metadata={\"source\": \"AzureAIAgent\"},\n            )\n\n            # For the bing grounding tool to return the citations, the message must contain an instruction for the model to do return them.\n            # For example: \"Please provide citations for the answers\"\n\n            result = await agent_with_bing_grounding.on_messages(\n                messages=[\n                    TextMessage(\n                        content=\"What is Microsoft's annual leave policy? Provide citations for your answers.\",\n                        source=\"user\",\n                    )\n                ],\n                cancellation_token=CancellationToken(),\n                message_limit=5,\n            )\n            print(result)\n\n\nawait bing_example()"
    }
  ],
  "links": [
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/azure-foundry-agent.html",
    "https://microsoft.github.io/autogen/stable/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/agentchat-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/core-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/autogenstudio-user-guide/index.html",
    "https://microsoft.github.io/autogen/stable/reference/index.html",
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/installation.html",
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/discover.html",
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/create-your-own.html",
    "https://microsoft.github.io/autogen/stable/user-guide/extensions-user-guide/azure-container-code-executor.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.magentic_one.html",
    "https://microsoft.github.io/autogen/stable/reference/python/autogen_ext.agents.azure.html"
  ]
}