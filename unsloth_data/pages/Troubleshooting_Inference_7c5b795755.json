{
  "title": "Troubleshooting Inference",
  "content": "If you're experiencing issues when running or saving your model.\n\n### Running in Unsloth works well, but after exporting & running on other platforms, the results are poor\n\nYou might sometimes encounter an issue where your model runs and produces good results on Unsloth, but when you use it on another platform like Ollama or vLLM, the results are poor or you might get gibberish, endless/infinite generations *or* repeated output&#x73;**.**\n\n* The most common cause of this error is using an <mark style=\"background-color:blue;\">**incorrect chat template**</mark>**.** Itâ€™s essential to use the SAME chat template that was used when training the model in Unsloth and later when you run it in another framework, such as llama.cpp or Ollama. When inferencing from a saved model, it's crucial to apply the correct template.\n* You must use the correct `eos token`. If not, you might get gibberish on longer generations.\n* It might also be because your inference engine adds an unnecessary \"start of sequence\" token (or the lack of thereof on the contrary) so ensure you check both hypotheses!\n* <mark style=\"background-color:green;\">**Use our conversational notebooks to force the chat template - this will fix most issues.**</mark>\n  * Qwen-3 14B Conversational notebook [**Open in Colab**](https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Qwen3_\\(14B\\)-Reasoning-Conversational.ipynb)\n  * Gemma-3 4B Conversational notebook [**Open in Colab**](https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Gemma3_\\(4B\\).ipynb)\n  * Llama-3.2 3B Conversational notebook [**Open in Colab**](https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Llama3.2_\\(1B_and_3B\\)-Conversational.ipynb)\n  * Phi-4 14B Conversational notebook [**Open in Colab**](https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Phi_4-Conversational.ipynb)\n  * Mistral v0.3 7B Conversational notebook [**Open in Colab**](https://colab.research.google.com/github/unslothai/notebooks/blob/main/nb/Mistral_v0.3_\\(7B\\)-Conversational.ipynb)\n  * **More notebooks in our** [**notebooks repo**](https://github.com/unslothai/notebooks)**.**\n\n### Saving to `safetensors`, not `bin` format in Colab\n\nWe save to `.bin` in Colab so it's like 4x faster, but set `safe_serialization = None` to force saving to `.safetensors`. So `model.save_pretrained(..., safe_serialization = None)` or `model.push_to_hub(..., safe_serialization = None)`\n\n### If saving to GGUF or vLLM 16bit crashes\n\nYou can try reducing the maximum GPU usage during saving by changing `maximum_memory_usage`.\n\nThe default is `model.save_pretrained(..., maximum_memory_usage = 0.75)`. Reduce it to say 0.5 to use 50% of GPU peak memory or lower. This can reduce OOM crashes during saving.",
  "code_samples": [],
  "headings": [
    {
      "level": "h3",
      "text": "Running in Unsloth works well, but after exporting & running on other platforms, the results are poor",
      "id": "running-in-unsloth-works-well,-but-after-exporting-&-running-on-other-platforms,-the-results-are-poor"
    },
    {
      "level": "h3",
      "text": "Saving to `safetensors`, not `bin` format in Colab",
      "id": "saving-to-`safetensors`,-not-`bin`-format-in-colab"
    },
    {
      "level": "h3",
      "text": "If saving to GGUF or vLLM 16bit crashes",
      "id": "if-saving-to-gguf-or-vllm-16bit-crashes"
    }
  ],
  "url": "llms-txt#troubleshooting-inference",
  "links": []
}