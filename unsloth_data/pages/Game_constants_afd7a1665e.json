{
  "title": "Game constants",
  "content": "GRAVITY = 0.5\nPIPE_SPEED = 5\nBIRD_SIZE = 30\nLAND_HEIGHT = 50\nPIPE_WIDTH = 50\nPIPE_GAP = 150\n\nclass Bird:\n    def __init__(self):\n        self.x = WIDTH // 2\n        self.y = HEIGHT // 2\n        self.velocity = 0\n        self.shape = random.choice(['square', 'circle', 'triangle'])\n        self.color = (random.randint(0, 100), random.randint(0, 100), random.randint(0, 100))\n        self.rect = pygame.Rect(self.x - BIRD_SIZE//2, self.y - BIRD_SIZE//2, BIRD_SIZE, BIRD_SIZE)\n    \n    def update(self):\n        self.velocity += GRAVITY\n        self.y += self.velocity\n        self.rect.y = self.y - BIRD_SIZE//2\n        self.rect.x = self.x - BIRD_SIZE//2  # Keep x centered\n    \n    def draw(self):\n        if self.shape == 'square':\n            pygame.draw.rect(screen, self.color, self.rect)\n        elif self.shape == 'circle':\n            pygame.draw.circle(screen, self.color, (self.rect.centerx, self.rect.centery), BIRD_SIZE//2)\n        elif self.shape == 'triangle':\n            points = [\n                (self.rect.centerx, self.rect.top),\n                (self.rect.left, self.rect.bottom),\n                (self.rect.right, self.rect.bottom)\n            ]\n            pygame.draw.polygon(screen, self.color, points)\n\ndef spawn_pipe():\n    pipe_x = WIDTH\n    top_height = random.randint(50, HEIGHT - PIPE_GAP - LAND_HEIGHT)\n    rect_top = pygame.Rect(pipe_x, 0, PIPE_WIDTH, top_height)\n    bottom_y = top_height + PIPE_GAP\n    bottom_height = (HEIGHT - LAND_HEIGHT) - bottom_y\n    rect_bottom = pygame.Rect(pipe_x, bottom_y, PIPE_WIDTH, bottom_height)\n    color = random.choice(pipe_colors)\n    return {\n        'rect_top': rect_top,\n        'rect_bottom': rect_bottom,\n        'color': color,\n        'scored': False\n    }\n\ndef main():\n    best_score = 0\n    current_score = 0\n    game_over = False\n    pipes = []\n    first_time = True  # Track first game play\n\n# Initial setup\n    background_color = (173, 216, 230)  # Light blue initially\n    land_color = random.choice(land_colors)\n    bird = Bird()\n\nwhile True:\n        for event in pygame.event.get():\n            if event.type == pygame.QUIT:\n                pygame.quit()\n                sys.exit()\n            if event.type == pygame.KEYDOWN:\n                if event.key == pygame.K_ESCAPE or event.key == pygame.K_q:\n                    pygame.quit()\n                    sys.exit()\n                if event.key == pygame.K_SPACE:\n                    if game_over:\n                        # Reset the game\n                        bird = Bird()\n                        pipes.clear()\n                        current_score = 0\n                        if first_time:\n                            # First restart after initial game over\n                            background_color = (random.randint(200, 255), random.randint(200, 255), random.randint(200, 255))\n                            first_time = False\n                        else:\n                            background_color = (random.randint(200, 255), random.randint(200, 255), random.randint(200, 255))\n                        land_color = random.choice(land_colors)\n                        game_over = False\n                    else:\n                        # Jump the bird\n                        bird.velocity = -15  # Initial upward velocity\n\nif not game_over:\n            # Update bird and pipes\n            bird.update()\n\n# Move pipes left\n            remove_pipes = []\n            for pipe in pipes:\n                pipe['rect_top'].x -= PIPE_SPEED\n                pipe['rect_bottom'].x -= PIPE_SPEED\n                # Check if bird passed the pipe\n                if not pipe['scored'] and bird.rect.x > pipe['rect_top'].right:\n                    current_score += 1\n                    pipe['scored'] = True\n                # Check if pipe is offscreen\n                if pipe['rect_top'].right < 0:\n                    remove_pipes.append(pipe)\n            # Remove offscreen pipes\n            for p in remove_pipes:\n                pipes.remove(p)\n\n# Spawn new pipe if needed\n            if not pipes or pipes[-1]['rect_top'].x < WIDTH - 200:\n                pipes.append(spawn_pipe())\n\n# Check collisions\n            land_rect = pygame.Rect(0, HEIGHT - LAND_HEIGHT, WIDTH, LAND_HEIGHT)\n            bird_rect = bird.rect\n            # Check pipes\n            for pipe in pipes:\n                if bird_rect.colliderect(pipe['rect_top']) or bird_rect.colliderect(pipe['rect_bottom']):\n                    game_over = True\n                    break\n            # Check land and top\n            if bird_rect.bottom >= land_rect.top or bird_rect.top <= 0:\n                game_over = True\n\nif game_over:\n                if current_score > best_score:\n                    best_score = current_score\n\n# Drawing\n        screen.fill(background_color)\n        # Draw pipes\n        for pipe in pipes:\n            pygame.draw.rect(screen, pipe['color'], pipe['rect_top'])\n            pygame.draw.rect(screen, pipe['color'], pipe['rect_bottom'])\n        # Draw land\n        pygame.draw.rect(screen, land_color, (0, HEIGHT - LAND_HEIGHT, WIDTH, LAND_HEIGHT))\n        # Draw bird\n        bird.draw()\n        # Draw score\n        font = pygame.font.SysFont(None, 36)\n        score_text = font.render(f'Score: {current_score}', True, (0, 0, 0))\n        screen.blit(score_text, (WIDTH - 150, 10))\n        # Game over screen\n        if game_over:\n            over_text = font.render('Game Over!', True, (255, 0, 0))\n            best_text = font.render(f'Best: {best_score}', True, (255, 0, 0))\n            restart_text = font.render('Press SPACE to restart', True, (255, 0, 0))\n            screen.blit(over_text, (WIDTH//2 - 70, HEIGHT//2 - 30))\n            screen.blit(best_text, (WIDTH//2 - 50, HEIGHT//2 + 10))\n            screen.blit(restart_text, (WIDTH//2 - 100, HEIGHT//2 + 50))\n        \n        pygame.display.flip()\n        clock.tick(60)\n\nif __name__ == \"__main__\":\n    main()\nbash\n./llama.cpp/llama-cli \\\n    --model unsloth-QwQ-32B-GGUF/QwQ-32B-Q4_K_M.gguf \\\n    --threads 32 \\\n    --ctx-size 16384 \\\n    --n-gpu-layers 99 \\\n    --seed 3407 \\\n    --prio 2 \\\n    --temp 0.6 \\\n    --repeat-penalty 1.1 \\\n    --dry-multiplier 0.5 \\\n    --min-p 0.01 \\\n    --top-k 40 \\\n    --top-p 0.95 \\\n    -no-cnv \\\n    --prompt \"<|im_start|>user\\nCreate a Flappy Bird game in Python. You must include these things:\\n1. You must use pygame.\\n2. The background color should be randomly chosen and is a light shade. Start with a light blue color.\\n3. Pressing SPACE multiple times will accelerate the bird.\\n4. The bird's shape should be randomly chosen as a square, circle or triangle. The color should be randomly chosen as a dark color.\\n5. Place on the bottom some land colored as dark brown or yellow chosen randomly.\\n6. Make a score shown on the top right side. Increment if you pass pipes and don't hit them.\\n7. Make randomly spaced pipes with enough space. Color them randomly as dark green or light brown or a dark gray shade.\\n8. When you lose, show the best score. Make the text inside the screen. Pressing q or Esc will quit the game. Restarting is pressing SPACE again.\\nThe final game should be inside a markdown section in Python. Check your code for errors and fix them before the final markdown section.<|im_end|>\\n<|im_start|>assistant\\n<think>\\n\"  \\\n        2>&1 | tee Q4_K_M_no_samplers.txt\npython\nimport pygame\nimport random",
  "code_samples": [
    {
      "code": "{% endcode %}\n\n</details>\n\n6. When running it, we get a runnable game!\n\n<figure><img src=\"https://3215535692-files.gitbook.io/~/files/v0/b/gitbook-x-prod.appspot.com/o/spaces%2FxhOjnexMCB3dmuQFQ2Zq%2Fuploads%2Fgit-blob-1740ecd246c7f62c363bc0ba1e0f1099b2f9b2a4%2Fimage.png?alt=media\" alt=\"\"><figcaption></figcaption></figure>\n\n7. Now try the same without our fixes! So remove `--samplers \"top_k;top_p;min_p;temperature;dry;typ_p;xtc\"` This will save the output to `Q4_K_M_no_samplers.txt`",
      "language": "unknown"
    },
    {
      "code": "You will get some looping, but **problematically incorrect Python syntax** and many other issues. For example the below looks correct, but is wrong! Ie line 39 `pipes.clear() ### <<< NameError: name 'pipes' is not defined. Did you forget to import 'pipes'?`\n\n{% code overflow=\"wrap\" lineNumbers=\"true\" %}",
      "language": "unknown"
    }
  ],
  "headings": [],
  "url": "llms-txt#game-constants",
  "links": []
}