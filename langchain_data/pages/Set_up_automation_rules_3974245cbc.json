{
  "title": "Set up automation rules",
  "content": "Source: https://docs.langchain.com/langsmith/rules\n\nWhile you can manually sift through and process production logs from your LLM application, it often becomes difficult as your application scales to more users.\nLangSmith provides a powerful feature called **Automations** that allow you to trigger certain actions on your trace data.\nAt a high level, automations are defined by a **filter**, **sampling rate**, and **action**.\n\nAutomation rules can trigger actions such as: adding traces to a dataset, adding to an annotation queue, triggering a webhook (e.g. for remote evaluations) or extending data retention. Some examples of automations you can set up:\n\n* Send all traces with negative feedback to an annotation queue for human review\n* Send 10% of all traces to an annotation queue for human review to spot check for issues\n* Upgrade all traces with errors for extended data retention\n\n<Info>\n  To configure online evaluations, visit the [online evaluations](/langsmith/online-evaluations) page.\n</Info>\n\n<Note>If an automation rule matches any run within a trace, the trace will be auto-upgraded to [extended data retention](/langsmith/administration-overview#data-retention-auto-upgrades). This upgrade will impact trace pricing, but ensures that traces meeting your automation criteria (typically those most valuable for analysis) are preserved for investigation. </Note>\n\n## View automation rules\n\nHead to the **Tracing Projects** tab and select a tracing project. To view existing automation rules for that tracing project, click on the **Automations** tab.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=9206c95784e0d572adddf7ad60e58717\" alt=\"View automation rules\" data-og-width=\"1349\" width=\"1349\" data-og-height=\"521\" height=\"521\" data-path=\"langsmith/images/view-automation-rules.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?w=280&fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=88988b3e687419b0494b36e20d424965 280w, https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?w=560&fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=8091094d8e938a31367fd456cdb16778 560w, https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?w=840&fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=08bce1184a23c4345c41abc2ede29826 840w, https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?w=1100&fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=faf56babdc5b9396a38e780600a31b4a 1100w, https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?w=1650&fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=8996953f130ed137172b26af817a5c22 1650w, https://mintcdn.com/langchain-5e9cc07a/1RIJxfRpkszanJLL/langsmith/images/view-automation-rules.png?w=2500&fit=max&auto=format&n=1RIJxfRpkszanJLL&q=85&s=fea915cf43defcf09e6b7161a2c2af8a 2500w\" />\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/aq-spot-check-rule.gif?s=0ea58303ab04ffa8ed16c49ab39701ef\" alt=\"Aq spot check rule\" data-og-width=\"1556\" width=\"1556\" data-og-height=\"1080\" height=\"1080\" data-path=\"langsmith/images/aq-spot-check-rule.gif\" data-optimize=\"true\" data-opv=\"3\" />\n\n#### 1. Navigate to rule creation\n\nHead to the **Tracing Projects** tab and select a tracing project. Click on **+ New** in the top right corner of the tracing project page, then click on **New Automation**.\n\n#### 2. Name your rule\n\n#### 3. Create a filter\n\nAutomation rule filters work the same way as filters applied to traces in the project. For more information on filters, you can refer to [this guide](./filter-traces-in-application)\n\n#### 4. Configure a sampling rate\n\nConfigure a sampling rate to control the percentage of filtered runs that trigger the automation action.\n\nYou can specify a sampling rate between 0 and 1 for automations. This will control the percent of the filtered runs that are sent to an automation action. For example, if you set the sampling rate to 0.5, then 50% of the traces that pass the filter will be sent to the action.\n\n#### 5. (Optional) Apply rule to past runs\n\nApply rule to past runs by toggling the **Apply to past runs** and entering a \"Backfill from\" date. This is only possible upon rule creation. Note: the backfill is processed as a background job, so you will not see the results immediately. In order to track progress of the backfill, you can [view logs for your automations](./rules#view-logs-for-your-automations)\n\n#### 6. Select an action to trigger when the rule is applied.\n\nThere are four actions you can take with an automation rule:\n\n* **Add to dataset**: Add the inputs and outputs of the trace to a [dataset](/langsmith/evaluation-concepts#datasets).\n* **Add to annotation queue**: Add the trace to an [annotation queue](/langsmith/evaluation-concepts#annotation-queues).\n* **Trigger webhook**: Trigger a webhook with the trace data. For more information on webhooks, you can refer to [this guide](./webhooks).\n* **Extend data retention**: Extends the data retention period on matching traces that use base retention [(see data retention docs for more details)](/langsmith/administration-overview#data-retention).\n  Note that all other rules will also extend data retention on matching traces through the\n  auto-upgrade mechanism described in the aforementioned data retention docs,\n  but this rule takes no additional action.\n\n## View logs for your automations\n\nLogs allow you to gain confidence that your rules are working as expected. You can view logs for your automations by heading to the **Automations** tab within a tracing project and clicking the **Logs** button for the rule you created.\n\nThe logs tab allows you to:\n\n* View all runs processed by a given rule for the time period selected\n* If a particular rule execution has triggered an error, you can view the error message by hovering over the error icon\n* You can monitor the progress of a backfill job by filtering to the rule's creation timestamp. This is because the backfill starts from when the rule was created.\n* Inspect the run that the automation rule applied to using the **View run** button. For rules that add runs as examples to datasets, you can view the example produced.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/rule-logs.gif?s=2ec5562fea9e2079b687da149d1609b3\" alt=\"Logs_Gif\" data-og-width=\"1556\" width=\"1556\" data-og-height=\"1080\" height=\"1080\" data-path=\"langsmith/images/rule-logs.gif\" data-optimize=\"true\" data-opv=\"3\" />\n\n<iframe className=\"w-full aspect-video rounded-xl\" src=\"https://www.youtube.com/embed/z69cBXTJFZ0?si=GBKQ9_muHR1zllLl\" title=\"YouTube video player\" frameBorder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowFullScreen />\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/rules.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [],
  "headings": [
    {
      "level": "h2",
      "text": "View automation rules",
      "id": "view-automation-rules"
    },
    {
      "level": "h2",
      "text": "Create a rule",
      "id": "create-a-rule"
    },
    {
      "level": "h2",
      "text": "View logs for your automations",
      "id": "view-logs-for-your-automations"
    },
    {
      "level": "h2",
      "text": "Video guide",
      "id": "video-guide"
    }
  ],
  "url": "llms-txt#set-up-automation-rules",
  "links": []
}