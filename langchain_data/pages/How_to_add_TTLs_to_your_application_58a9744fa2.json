{
  "title": "How to add TTLs to your application",
  "content": "Source: https://docs.langchain.com/langsmith/configure-ttl\n\n<Tip>\n  **Prerequisites**\n  This guide assumes familiarity with [LangSmith](/langsmith/home), [Persistence](/oss/python/langgraph/persistence), and [Cross-thread persistence](/oss/python/langgraph/persistence#memory-store) concepts.\n</Tip>\n\nLangSmith persists both [checkpoints](/oss/python/langgraph/persistence#checkpoints) (thread state) and [cross-thread memories](/oss/python/langgraph/persistence#memory-store) (store items). Configure Time-to-Live (TTL) policies in `langgraph.json` to automatically manage the lifecycle of this data, preventing indefinite accumulation.\n\n## Configuring checkpoint TTL\n\nCheckpoints capture the state of conversation threads. Setting a TTL ensures old checkpoints and threads are automatically deleted.\n\nAdd a `checkpointer.ttl` configuration to your `langgraph.json` file:\n\n* `strategy`: Specifies the action taken on expiration. Currently, only `\"delete\"` is supported, which deletes all checkpoints in the thread upon expiration.\n* `sweep_interval_minutes`: Defines how often, in minutes, the system checks for expired checkpoints.\n* `default_ttl`: Sets the default lifespan of threads (and corresponding checkpoints) in minutes (e.g., 43200 minutes = 30 days). Applies only to checkpoints created after this configuration is deployed; existing checkpoints/threads are not changed. To clear older data, delete it explicitly.\n\n## Configuring store item TTL\n\nStore items allow cross-thread data persistence. Configuring TTL for store items helps manage memory by removing stale data.\n\nAdd a `store.ttl` configuration to your `langgraph.json` file:\n\n* `refresh_on_read`: (Optional, default `true`) If `true`, accessing an item via `get` or `search` resets its expiration timer. If `false`, TTL only refreshes on `put`.\n* `sweep_interval_minutes`: (Optional) Defines how often, in minutes, the system checks for expired items. If omitted, no sweeping occurs.\n* `default_ttl`: (Optional) Sets the default lifespan of store items in minutes (e.g., 10080 minutes = 7 days). Applies only to items created after this configuration is deployed; existing items are not changed. If you need to clear older items, delete them manually. If omitted, items do not expire by default.\n\n## Combining TTL configurations\n\nYou can configure TTLs for both checkpoints and store items in the same `langgraph.json` file to set different policies for each data type. Here is an example:\n\n## Configure per-thread TTL\n\nYou can apply [TTL configurations per-thread](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.client.ThreadsClient.create).\n\nThe default `store.ttl` settings from `langgraph.json` can be overridden at runtime by providing specific TTL values in SDK method calls like `get`, `put`, and `search`.\n\n## Deployment process\n\nAfter configuring TTLs in `langgraph.json`, deploy or restart your LangGraph application for the changes to take effect. Use `langgraph dev` for local development or `langgraph up` for Docker deployment.\n\nSee the [langgraph.json CLI reference](https://langchain-ai.github.io/langgraph/reference/configuration/#configuration-file) for more details on the other configurable options.\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/configure-ttl.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "* `strategy`: Specifies the action taken on expiration. Currently, only `\"delete\"` is supported, which deletes all checkpoints in the thread upon expiration.\n* `sweep_interval_minutes`: Defines how often, in minutes, the system checks for expired checkpoints.\n* `default_ttl`: Sets the default lifespan of threads (and corresponding checkpoints) in minutes (e.g., 43200 minutes = 30 days). Applies only to checkpoints created after this configuration is deployed; existing checkpoints/threads are not changed. To clear older data, delete it explicitly.\n\n## Configuring store item TTL\n\nStore items allow cross-thread data persistence. Configuring TTL for store items helps manage memory by removing stale data.\n\nAdd a `store.ttl` configuration to your `langgraph.json` file:",
      "language": "unknown"
    },
    {
      "code": "* `refresh_on_read`: (Optional, default `true`) If `true`, accessing an item via `get` or `search` resets its expiration timer. If `false`, TTL only refreshes on `put`.\n* `sweep_interval_minutes`: (Optional) Defines how often, in minutes, the system checks for expired items. If omitted, no sweeping occurs.\n* `default_ttl`: (Optional) Sets the default lifespan of store items in minutes (e.g., 10080 minutes = 7 days). Applies only to items created after this configuration is deployed; existing items are not changed. If you need to clear older items, delete them manually. If omitted, items do not expire by default.\n\n## Combining TTL configurations\n\nYou can configure TTLs for both checkpoints and store items in the same `langgraph.json` file to set different policies for each data type. Here is an example:",
      "language": "unknown"
    },
    {
      "code": "## Configure per-thread TTL\n\nYou can apply [TTL configurations per-thread](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.client.ThreadsClient.create).",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Configuring checkpoint TTL",
      "id": "configuring-checkpoint-ttl"
    },
    {
      "level": "h2",
      "text": "Configuring store item TTL",
      "id": "configuring-store-item-ttl"
    },
    {
      "level": "h2",
      "text": "Combining TTL configurations",
      "id": "combining-ttl-configurations"
    },
    {
      "level": "h2",
      "text": "Configure per-thread TTL",
      "id": "configure-per-thread-ttl"
    },
    {
      "level": "h2",
      "text": "Runtime overrides",
      "id": "runtime-overrides"
    },
    {
      "level": "h2",
      "text": "Deployment process",
      "id": "deployment-process"
    }
  ],
  "url": "llms-txt#how-to-add-ttls-to-your-application",
  "links": []
}