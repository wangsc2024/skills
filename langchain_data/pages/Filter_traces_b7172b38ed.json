{
  "title": "Filter traces",
  "content": "Source: https://docs.langchain.com/langsmith/filter-traces-in-application\n\n<Tip>**Recommended reading**: It might be helpful to read the [Conceptual guide on tracing](/langsmith/observability-concepts) to gain familiarity with the concepts mentioned on this page.</Tip>\n\nTracing projects can contain a significant amount of data. Filters are used for effectively navigating and analyzing this data, allowing you to:\n\n* **Have focused investigations**: Quickly narrow down to specific runs for ad-hoc analysis\n* **Debug and analyze**: Identify and examine errors, failed runs, and performance bottlenecks\n\nThis page contains a series of guides for how to filter runs in a tracing project. If you are programmatically exporting runs for analysis via the [API](https://api.smith.langchain.com/redoc#tag/run/operation/query_runs_api_v1_runs_query_post) or [SDK](https://docs.smith.langchain.com/reference/python/client/langsmith.client.Client#langsmith.client.Client.list_runs), please refer to the [exporting traces guide](./export-traces) for more information.\n\n## Creating and Applying Filters\n\n### Filtering by run attributes\n\nThere are two ways to filter runs in a tracing project:\n\n1. **Filters**: Located towards the top-left of the tracing projects page. This is where you construct and manage detailed filter criteria.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=d3751c19f28b7dffecec87e27d6c6d53\" alt=\"Filtering\" data-og-width=\"1156\" width=\"1156\" data-og-height=\"551\" height=\"551\" data-path=\"langsmith/images/filter.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?w=280&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=f03bd4a75a5b8b0cc2cb2d96b0908000 280w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?w=560&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=68f5583f17be5060e8815ae14edd6619 560w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?w=840&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=35af2365bef2b299b70e336209c54797 840w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?w=1100&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=fc2bc02daf5f56c914cd0cf7f274d200 1100w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?w=1650&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=e45165a47a471aaf0e94dcb5e2abbb7d 1650w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter.png?w=2500&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=98ee26df269a2bdabad8a3f5bea1211a 2500w\" />\n\n2. **Filter Shortcuts**: Positioned on the right sidebar of the tracing projects page. The filter shortcuts bar provides quick access to filters based on the most frequently occurring attributes in your project's runs.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=c70333d17e9f38f813a6ddef017c7a29\" alt=\"Filter Shortcuts\" data-og-width=\"1330\" width=\"1330\" data-og-height=\"1078\" height=\"1078\" data-path=\"langsmith/images/filter-shortcuts.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?w=280&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=b2e073e3f070674704f3f6506e851bc2 280w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?w=560&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=dbdcf6272d1f115a158f4b1dad02f4b7 560w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?w=840&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=808645fd9ebcd95e424b8b0a47a75cde 840w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?w=1100&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=de2a53f560cfaecb13673b400a46de55 1100w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?w=1650&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=73ac5c2913b9e13ae99822c2a80b290e 1650w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-shortcuts.png?w=2500&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=f126680bfdf0fe958a7cc06429387582 2500w\" />\n\n<Info>\n  **Default filter**\n\nBy default, the `IsTrace` is `true` filter is applied. This displays only top-level traces. Removing this filter will show all runs, including intermediate spans, in the project.\n</Info>\n\n### Filtering by time range\n\nIn addition to filtering by run attributes, you can also filter runs within a specific time range. This option is available towards the top-left of the tracing projects page.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=214ec0a0bcec5e5bf07a54becec35a80\" alt=\"Filtering on time\" data-og-width=\"1325\" width=\"1325\" data-og-height=\"680\" height=\"680\" data-path=\"langsmith/images/filter-time.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?w=280&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=cf9a2351d13ebfcada25090fc8a56f6e 280w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?w=560&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=35ef8e40fcb515e8b9b9b98d49312521 560w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?w=840&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=7c69f28b9a1debb36dd1929292d0dca3 840w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?w=1100&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=a538ee5b3b711f1d257cc733e701ef0c 1100w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?w=1650&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=acb075b10621f69b098b929fc64d54d3 1650w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-time.png?w=2500&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=e11f9d866b5ad3b89a29fad8167f5aac 2500w\" />\n\nThe available filter operators depend on the data type of the attribute you are filtering on. Here's an overview of common operators:\n\n* **is**: Exact match on the filter value\n* **is not**: Negative match on the filter value\n* **contains**: Partial match on the filter value\n* **does not contain**: Negative partial match on the filter value\n* **is one of**: Match on any of the values in the list\n* `>` / `<`: Available for numeric fields\n\n## Specific Filtering Techniques\n\n### Filter for intermediate runs (spans)\n\nIn order to filter for intermediate runs (spans), you first need to remove the default `IsTrace` is `true` filter. For example, you would do this if you wanted to filter by `run name` for sub runs or filter by `run type`.\n\nRun metadata and tags are also powerful to filter on. These rely on good tagging across all parts of your pipeline. To learn more, you can check out [this guide](./add-metadata-tags).\n\n### Filter based on inputs and outputs\n\nYou can filter runs based on the content in the inputs and outputs of the run.\n\nTo filter either inputs or outputs, you can use the `Full-Text Search` filter which will match keywords in either field. For more targeted search, you can use the `Input` or `Output` filters which will only match content based on the respective field.\n\n<Note>\n  For performance, we index up to 250 characters of data for full-text search. If your search query exceeds this limit, we recommend using [Input/Output key-value search](/langsmith/filter-traces-in-application#filter-based-on-input-%2F-output-key-value-pairs) instead.\n</Note>\n\nYou can also specify multiple matches, either by including multiple terms separated by whitespace, or adding multiple filters - which will try to match all terms provided.\n\nNote that keyword search is done by splitting the text and finding any partial matches on the search keywords, so it is not done in specific order. We exclude common stop words from the search (from the nltk stop word list along with a few other common JSON keywords).\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=9d233d67218491a50cc759335a8ce6fa\" alt=\"Filtering\" data-og-width=\"368\" width=\"368\" data-og-height=\"301\" height=\"301\" data-path=\"langsmith/images/filter-full-text.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?w=280&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=bf7a2397bf1fda0c41a460bd8c2ae9f2 280w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?w=560&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=2ca993100e989cdfe8628b0d788fbd37 560w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?w=840&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=1c379c825a1759dc3e13f7c182475159 840w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?w=1100&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=7e1eab353b75b25d22a901a01caff403 1100w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?w=1650&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=8fd894a5a8725b5f048bcc9d03b27d07 1650w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-full-text.png?w=2500&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=f3a68f1e2dc9ab3451f1d5e10733322c 2500w\" />\n\nBased on the filters above, the system will search for `python` and `tensorflow` in either inputs or outputs, and `embedding` in the inputs along with `fine` and `tune` in the outputs.\n\n### Filter based on input / output key-value pairs\n\nIn addition to full-text search, you can filter runs based on specific key-value pairs in the inputs and outputs. This allows for more precise filtering, especially when dealing with structured data.\n\n<Note>\n  We index up to 100 unique keys to keep your data organized and searchable. Each key also has a character limit of 250 characters per value. If your data exceeds either of these limits, the text won't be indexed. This helps us ensure fast, reliable performance.\n</Note>\n\nTo filter based on key-value pairs, select the `Input Key` or `Output Key` filter from the filters dropdown.\n\nFor example, to match the following input:\n\nSelect `Filters`, `Add Filter` to bring up the filtering options. Then select `Input Key`, enter `input` as the key and enter `What is the capital of France?` as the value.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=fef9d6d6bb8c6d285df898ce9c93f192\" alt=\"Filtering\" data-og-width=\"575\" width=\"575\" data-og-height=\"132\" height=\"132\" data-path=\"langsmith/images/search-kv-input.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=6625f651706eae30b9f1ce9fcbfdb9b2 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=184a5582ff5deba63ca77aa203af7fbc 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=5d7c647a7249e766a43b9f0995a60ab1 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=901d0c7b928a44a753d42058aad52a8e 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=cbb901c4a190590ebc194999cf525260 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=7614d23d5ba9e06b8673905ef93e6fb5 2500w\" />\n\nYou can also match nested keys by using dot notation to select the nested key name. For example, to match nested keys in the output:\n\nSelect `Output Key`, enter `documents.page_content` as the key and enter `The capital of France is Paris` as the value. This will match the nested key `documents.page_content` with the specified value.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=6d66e1d62691463e05a7933bb3b2c0ce\" alt=\"Filtering\" data-og-width=\"708\" width=\"708\" data-og-height=\"95\" height=\"95\" data-path=\"langsmith/images/search-kv-output.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=a7f623484a5b5b5ab4c8a83f1288bed0 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=1756043b13d848b8b61043a88c06aa43 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=eef83852d80520b9941d72fe41cc4d64 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=683073a1b186796b7b9892748c1fbd94 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=1fdf9cf2ef7eaf699e0d7212ef2ea2ea 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=e8ab34552881a97fe451bfc3794b6cbb 2500w\" />\n\nYou can add multiple key-value filters to create more complex queries. You can also use the `Filter Shortcuts` on the right side to quickly filter based on common key-value pairs as shown below:\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=9cec4279c975c71e67710c606a2dc700\" alt=\"Filtering\" data-og-width=\"637\" width=\"637\" data-og-height=\"702\" height=\"702\" data-path=\"langsmith/images/search-kv-filter-shortcut.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=667fbfc50987837e0f0188b8d1dbf1ca 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ef422e47304d43568ae954e35c7b1764 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=c84e0935eb05be46679d57bb86219d07 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ee8dcaf98f8fd9dc65d5b7f17df1804a 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=d0b79382681256ab905af3fc0d7c5660 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=8da0c834fad83b17d5cdf69bdd1ccb64 2500w\" />\n\n### Example: Filtering for tool calls\n\nIt's common to want to search for traces that contain specific tool calls. Tool calls are typically indicated in the output of an LLM run. To filter for tool calls, you would use the `Output Key` filter.\n\nWhile this example will show you how to filter for tool calls, the same logic can be applied to filter for any key-value pair in the output.\n\nIn this case, let's assume this is the output you want to filter for:\n\nWith the example above, the KV search will map each nested JSON path as a key-value pair that you can use to search and filter.\n\nLangSmith will break it into the following set of searchable key-value pairs:\n\n| Key                                                | Value                                                                        |\n| -------------------------------------------------- | ---------------------------------------------------------------------------- |\n| `generations.type`                                 | `ChatGeneration`                                                             |\n| `generations.message.type`                         | `constructor`                                                                |\n| `generations.message.kwargs.type`                  | `ai`                                                                         |\n| `generations.message.kwargs.id`                    | `run-ca7f7531-f4de-4790-9c3e-960be7f8b109`                                   |\n| `generations.message.kwargs.tool_calls.name`       | `Plan`                                                                       |\n| `generations.message.kwargs.tool_calls.args.steps` | `Research LangGraph's node configuration capabilities`                       |\n| `generations.message.kwargs.tool_calls.args.steps` | `Investigate how to add a Python code execution node`                        |\n| `generations.message.kwargs.tool_calls.args.steps` | `Find an example or create a sample implementation of a code execution node` |\n| `generations.message.kwargs.tool_calls.id`         | `toolu_01XexPzAVknT3gRmUB5PK5BP`                                             |\n| `generations.message.kwargs.tool_calls.type`       | `tool_call`                                                                  |\n| `type`                                             | `LLMResult`                                                                  |\n\nTo search for a specific tool call, you can use the following Output Key search while removing the root runs filter:\n\n`generations.message.kwargs.tool_calls.name` = `Plan`\n\nThis will match root and non-root runs where the `tool_calls` name is `Plan`.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=9d763b8572d14db7f1bc59a3cf4b08a5\" alt=\"Filtering\" data-og-width=\"629\" width=\"629\" data-og-height=\"98\" height=\"98\" data-path=\"langsmith/images/search-kv-tool.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=9cd9ec450a02572f4bdcec3850bbf4c2 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=a0988bd110eb51fc73f7e5e2875117b2 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=21710580f012a7a62eeaf528f735f4c9 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=5778f4ef1f156e7d2d0a04f45339aa72 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ae736245285787c485a6a085e5eec65e 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=178a7e4dec57f7260393ee8d0b16030a 2500w\" />\n\n### Negative filtering on key-value pairs\n\nDifferent types of negative filtering can be applied to `Metadata`, `Input Key`, and `Output Key` fields to exclude specific runs from your results.\n\nFor example, to find all runs where the metadata key `phone` is not equal to `1234567890`, set the `Metadata` `Key` operator to `is` and `Key` field to `phone`, then set the `Value` operator to `is not` and the `Value` field to `1234567890`. This will match all runs that have a metadata key `phone` with any value except `1234567890`.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=acbd683725e073e1ac78b8ba132e6d43\" alt=\"Filtering\" data-og-width=\"549\" width=\"549\" data-og-height=\"100\" height=\"100\" data-path=\"langsmith/images/negative-filtering-1.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?w=280&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=a0fd6f85165cae0ca7a7d96be57805e1 280w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?w=560&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=714cdc9f0ad4e6c2b67d49d79740e9b2 560w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?w=840&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=cf74951b9cf760cbd6c5653b6d15b95a 840w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?w=1100&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=4ae07131bdb12d5e6c5676e51f54ee7c 1100w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?w=1650&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=bfb45574bec84ad88d9866b025ac61ba 1650w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-1.png?w=2500&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=e4a74fca06b1bf2940f15528b04f1b21 2500w\" />\n\nTo find runs that don't have a specific metadata key, set the `Key` operator to `is not`. For example, setting the `Key` operator to `is not` with `phone` as the key will match all runs that don't have a `phone` field in their metadata.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=2c298181ed0aef202ca52f5c30b3d62b\" alt=\"Filtering\" data-og-width=\"419\" width=\"419\" data-og-height=\"128\" height=\"128\" data-path=\"langsmith/images/negative-filtering-2.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?w=280&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=cb11546a30cf22c9653c05519b263409 280w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?w=560&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=6a7f5a2ac54f187e449f24011af6f160 560w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?w=840&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=161ed2a1433d0fa695ef527b32292ee6 840w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?w=1100&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=d7f8b99d1af28d2e27cdab3c3b03fdad 1100w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?w=1650&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=ef65a43c85924cf25da164bc049e7029 1650w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-2.png?w=2500&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=5c79162abd3187782b27f06f28a9d590 2500w\" />\n\nYou can also filter for runs that neither have a specific key nor a specific value. To find runs where the metadata has neither the key `phone` nor any field with the value `1234567890`, set the `Key` operator to `is not` with key `phone`, and the `Value` operator to `is not` with value `1234567890`.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=18ca1b82babfda201b184a8884d120eb\" alt=\"Filtering\" data-og-width=\"571\" width=\"571\" data-og-height=\"125\" height=\"125\" data-path=\"langsmith/images/negative-filtering-3.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?w=280&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=50c9bee0afc47df246ddb3313e1b7784 280w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?w=560&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=5bbf4d4da70355e861ce7b7adf5ca4b5 560w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?w=840&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=ba52269765451c26687cc7b74a572a68 840w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?w=1100&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=6b2b21485dc7073c4edc8b0d1b6718b1 1100w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?w=1650&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=18b134952892cc7e5203a5dfaa25eda4 1650w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-3.png?w=2500&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=f546a96e2b6b229cc593e8a31ec7572f 2500w\" />\n\nFinally, you can also filter for runs that do not have a specific key but have a specific value. To find runs where there is no `phone` key but there is a value of `1234567890` for some other key, set the `Key` operator to `is not` with key `phone`, and the `Value` operator to `is` with value `1234567890`.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=60e118205cc6524432058ce968aad478\" alt=\"Filtering\" data-og-width=\"546\" width=\"546\" data-og-height=\"126\" height=\"126\" data-path=\"langsmith/images/negative-filtering-4.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?w=280&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=edd2fee83ba3d63bd8a44f82cfc2c66c 280w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?w=560&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=20bfead7865f62ee4db7890734c811ac 560w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?w=840&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=42d6832b0db4843441c5a8dcd95c88b7 840w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?w=1100&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=6361c16f6321f6f47ca83867f3f5bfbd 1100w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?w=1650&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=6fcbe01d2be9672356101c4b9a585e78 1650w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/negative-filtering-4.png?w=2500&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=4dcb53d4331f8a1802ec49b1c3d1971a 2500w\" />\n\nNote that you can use the `does not contain` operator instead of `is not` to perform a substring match.\n\nSaving filters allows you to store and reuse frequently used filter configurations. Saved filters are specific to a tracing project.\n\nIn the filter box, click the **Save filter** button after you have constructed your filter. This will bring up a dialog to specify the name and a description of the filter.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=27236a7b0e60a352d16b7affd9b913e5\" alt=\"Filtering\" data-og-width=\"854\" width=\"854\" data-og-height=\"775\" height=\"775\" data-path=\"langsmith/images/save-a-filter.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=8bf93a5ab643e0f0ef5194529a084879 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=6cb4d039bf74e97e65688465707560ab 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=381acf9bb9f3c2443faeb4dc0c84506f 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=fd1660d33217beb5031de6546ff2cdf7 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=4b4bc3898549d5f505d0e8989307d5f4 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/save-a-filter.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=a9927179e81ace45255aef6a99c77aa3 2500w\" />\n\n#### Use a saved filter\n\nAfter saving a filter, it is available in the filter bar as a quick filter for you to use. If you have more than three saved filters, only two will be displayed directly, with the rest accessible via a \"more\" menu. You can use the settings icon in the saved filter bar to optionally hide default saved filters.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=89774c393f6303c981adeba6750f7cad\" alt=\"Filtering\" data-og-width=\"1256\" width=\"1256\" data-og-height=\"404\" height=\"404\" data-path=\"langsmith/images/selecting-a-filter.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=a204feab24664b271ddc70ea8dd60698 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=4806fcac0a82770fccdb66b06181736e 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=9600c7b41c39c9759347a7a5f6ba7d4d 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=2f4a06c4a4dd87c995b54cae9f177e23 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=5f5df78152c343362d6f3ba0c7a9a82a 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/selecting-a-filter.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=9d681b4c6a42c7c4a9440525bb1a3557 2500w\" />\n\n#### Update a saved filter\n\nWith the filter selected, make any changes to filter parameters. Then click **Update filter** > **Update** to update the filter.\n\nIn the same menu, you can also create a new saved filter by clicking **Update filter** > **Create new**.\n\n#### Delete a saved filter\n\nClick the settings icon in the saved filter bar, and delete a filter using the trash icon.\n\nYou can copy a constructed filter to share it with colleagues, reuse it later, or query runs programmatically in the [API](https://api.smith.langchain.com/redoc#tag/run/operation/query_runs_api_v1_runs_query_post) or [SDK](https://docs.smith.langchain.com/reference/python/client/langsmith.client.Client#langsmith.client.Client.list_runs).\n\nIn order to copy the filter, you can first create it in the UI. From there, you can click the copy button in the upper right hand corner. If you have constructed tree or trace filters, you can also copy those.\n\nThis will give you a string representing the filter in the LangSmith query language. For example: `and(eq(is_root, true), and(eq(feedback_key, \"user_score\"), eq(feedback_score, 1)))`. For more information on the query language syntax, please refer to [this reference](/langsmith/trace-query-syntax#filter-query-language).\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=f9f60cca965c1466fe58ec4e8cc52ea5\" alt=\"Copy Filter\" data-og-width=\"1123\" width=\"1123\" data-og-height=\"382\" height=\"382\" data-path=\"langsmith/images/copy-filter.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?w=280&fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=8966107385058659add5005faa0570d5 280w, https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?w=560&fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=54cdbad3c852e011f1bbf9bf59cd553d 560w, https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?w=840&fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=198de895cd5c70de24e72b9eb5f8975d 840w, https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?w=1100&fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=b500fb05f2705eb74157d5a1ba2bebbe 1100w, https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?w=1650&fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=67cdd3110def30e481ec0266eaffac66 1650w, https://mintcdn.com/langchain-5e9cc07a/aKRoUGXX6ygp4DlC/langsmith/images/copy-filter.png?w=2500&fit=max&auto=format&n=aKRoUGXX6ygp4DlC&q=85&s=f2366d6a3ab857b74bcbd551122ec350 2500w\" />\n\n## Filtering runs within the trace view\n\nYou can also apply filters directly within the trace view, which is useful for sifting through traces with a large number of runs. The same filters available in the main runs table view can be applied here.\n\nBy default, only the runs that match the filters will be shown. To see the matched runs within the broader context of the trace tree, switch the view option from \"Filtered Only\" to \"Show All\" or \"Most relevant\".\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=13ea9f30d6efd9bb3f96c8c2376a6858\" alt=\"Filtering within trace view\" data-og-width=\"1341\" width=\"1341\" data-og-height=\"764\" height=\"764\" data-path=\"langsmith/images/filter-runs-in-trace-view.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?w=280&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=506069ddcc28d8959213f1bfa5d4d2eb 280w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?w=560&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=8b4e2a130a76953f7291e983fb13c86d 560w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?w=840&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=f702ad52060f28de4febdc556daafc6e 840w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?w=1100&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=4c6506211f69e03b54793fce9c85760b 1100w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?w=1650&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=ad5849855b303c6357705708e038a9d6 1650w, https://mintcdn.com/langchain-5e9cc07a/0B2PFrFBMRWNccee/langsmith/images/filter-runs-in-trace-view.png?w=2500&fit=max&auto=format&n=0B2PFrFBMRWNccee&q=85&s=6fd17200291f3c6eb680861aa1ab7d80 2500w\" />\n\n## Manually specify a raw query in LangSmith query language\n\nIf you have [copied a previously constructed filter](/langsmith/filter-traces-in-application#copy-the-filter), you may want to manually apply this raw query in a future session.\n\nIn order to do this, you can click on **Advanced filters** on the bottom of the filters popover. From there you can paste a raw query into the text box.\n\nNote that this will add that query to the existing queries, not overwrite it.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=0657c7420e760fb57782531d039c0b0d\" alt=\"Raw Query\" data-og-width=\"495\" width=\"495\" data-og-height=\"570\" height=\"570\" data-path=\"langsmith/images/raw-query.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=8ebe5718f7e50c0e5186d23ea6467620 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=121dab45e0a3f1599ad9dd26132f2c59 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=0d3ca66c6498f2c1d4e33bf4b63068e8 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ef61bc19b9fe41eb0e5d80566049e288 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ccaeac2952f3a2fde4d99c5d69c8055d 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/raw-query.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=f15ec18a7e3cb748defc6d10c3033d28 2500w\" />\n\n## Use an AI Query to auto-generate a query (Experimental)\n\nSometimes figuring out the exact query to specify can be difficult! In order to make it easier, we've added an `AI Query` functionality. With this, you can type in the filter you want to construct in natural language and it will convert it into a valid query.\n\nFor example: \"All runs longer than 10 seconds\"\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=ef4266d159753dacafbd5af2bcad0ab8\" alt=\"AI Query\" data-og-width=\"464\" width=\"464\" data-og-height=\"319\" height=\"319\" data-path=\"langsmith/images/ai-query.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?w=280&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=9589aa2ef6d4fd16533c0b9123ab552e 280w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?w=560&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=f03177102e2c6fa2ec2043bce0d3aa7d 560w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?w=840&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=3f6c3c22f37565790e77fa8a55e459a6 840w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?w=1100&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=8ba2568d2044c01364206560d7dd8efc 1100w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?w=1650&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=8bf30e3c64545cca142bf0a6745e19f6 1650w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/ai-query.png?w=2500&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=c38f6e1b2e00ef271d25f9f674aa27a4 2500w\" />\n\n### Filter for intermediate runs (spans) on properties of the root\n\nA common concept is to filter for intermediate runs which are part of a trace whose root run has some attribute. An example is filtering for intermediate runs of a particular type whose root run has positive (or negative) feedback associated with it.\n\nIn order to do this, first set up a filter for intermediate runs (per the above section). After that, you can then add another filter rule. You can then click the `Advanced Filters` link all the way at the bottom of the filter. This will open up a new modal where you can add `Trace filters`. These filters will apply to the traces of all the parent runs of the individual runs you've already filtered for.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=a520558efb53e4dd3d6751db76739f90\" alt=\"Filtering\" data-og-width=\"551\" width=\"551\" data-og-height=\"542\" height=\"542\" data-path=\"langsmith/images/trace-filter.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?w=280&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=5303c1b8db95a047593d52ff52ebc55f 280w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?w=560&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=d21e37d06556b6cd20d88c6b72293f68 560w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?w=840&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=700e831f6c8d473bb9eb3beca7131b4e 840w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?w=1100&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=43467c081d7cfc83582220fe6b7266fe 1100w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?w=1650&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=9cda650d2069d852c95d8e51893e424d 1650w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-filter.png?w=2500&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=f0fa57df70f665ef672c917fe6231c15 2500w\" />\n\n### Filter for runs (spans) whose child runs have some attribute\n\nThis is the opposite of the above. You may want to search for runs who have specific types of sub runs. An example of this could be searching for all traces that had a sub run with name `Foo`. This is useful when `Foo` is not always called, but you want to analyze the cases where it is.\n\nIn order to do this, you can click on the `Advanced Filters` link all the way at the bottom of the filter. This will open up a new modal where you can add `Tree filters`. This will make the rule you specify apply to all child runs of the individual runs you've already filtered for.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=6b70fc03e9f46333d7af3566619204f0\" alt=\"Filtering\" data-og-width=\"471\" width=\"471\" data-og-height=\"602\" height=\"602\" data-path=\"langsmith/images/child-runs.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?w=280&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=4e7f54072ed1f198804ffca3e073710c 280w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?w=560&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=2c9e7b6627d5edece1b4f90879c03310 560w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?w=840&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=265d349fc921cf06be7910f20f275a5e 840w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?w=1100&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=8445bba9df0671da9e718e63c4e2cc48 1100w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?w=1650&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=cfd020e86ca4b5e2cc77ee43a0c35746 1650w, https://mintcdn.com/langchain-5e9cc07a/E8FdemkcQxROovD9/langsmith/images/child-runs.png?w=2500&fit=max&auto=format&n=E8FdemkcQxROovD9&q=85&s=199dab9b8f3adbaecadf3c2206ab008c 2500w\" />\n\n### Example: Filtering on all runs whose tree contains the tool call filter\n\nExtending the [tool call filtering example](/langsmith/filter-traces-in-application#example-filtering-for-tool-calls) from above, if you would like to filter for all runs *whose tree contains* the tool filter call, you can use the tree filter in the [advanced filters](/langsmith/filter-traces-in-application#advanced-filters) setting:\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=b11deac10cd42be7efff94134658b25b\" alt=\"Filtering\" data-og-width=\"669\" width=\"669\" data-og-height=\"462\" height=\"462\" data-path=\"langsmith/images/search-kv-tool-tree.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=3f487a02af0891c8c97935b8674d8aba 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=4334fbf4536432920e35d1df4f5cff2e 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=c7b2edb49f520ebe3e2f03651c8d9d39 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=6c107e48006c1ee4d2246935b1259595 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=be785994ef014f06767d1001f5d5dbf1 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-tool-tree.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=c686bc45b1d33a12ddcc89aa9c5c0a35 2500w\" />\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/filter-traces-in-application.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "Select `Filters`, `Add Filter` to bring up the filtering options. Then select `Input Key`, enter `input` as the key and enter `What is the capital of France?` as the value.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=fef9d6d6bb8c6d285df898ce9c93f192\" alt=\"Filtering\" data-og-width=\"575\" width=\"575\" data-og-height=\"132\" height=\"132\" data-path=\"langsmith/images/search-kv-input.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=6625f651706eae30b9f1ce9fcbfdb9b2 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=184a5582ff5deba63ca77aa203af7fbc 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=5d7c647a7249e766a43b9f0995a60ab1 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=901d0c7b928a44a753d42058aad52a8e 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=cbb901c4a190590ebc194999cf525260 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-input.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=7614d23d5ba9e06b8673905ef93e6fb5 2500w\" />\n\nYou can also match nested keys by using dot notation to select the nested key name. For example, to match nested keys in the output:",
      "language": "unknown"
    },
    {
      "code": "Select `Output Key`, enter `documents.page_content` as the key and enter `The capital of France is Paris` as the value. This will match the nested key `documents.page_content` with the specified value.\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=6d66e1d62691463e05a7933bb3b2c0ce\" alt=\"Filtering\" data-og-width=\"708\" width=\"708\" data-og-height=\"95\" height=\"95\" data-path=\"langsmith/images/search-kv-output.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=a7f623484a5b5b5ab4c8a83f1288bed0 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=1756043b13d848b8b61043a88c06aa43 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=eef83852d80520b9941d72fe41cc4d64 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=683073a1b186796b7b9892748c1fbd94 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=1fdf9cf2ef7eaf699e0d7212ef2ea2ea 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-output.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=e8ab34552881a97fe451bfc3794b6cbb 2500w\" />\n\nYou can add multiple key-value filters to create more complex queries. You can also use the `Filter Shortcuts` on the right side to quickly filter based on common key-value pairs as shown below:\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=9cec4279c975c71e67710c606a2dc700\" alt=\"Filtering\" data-og-width=\"637\" width=\"637\" data-og-height=\"702\" height=\"702\" data-path=\"langsmith/images/search-kv-filter-shortcut.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=280&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=667fbfc50987837e0f0188b8d1dbf1ca 280w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=560&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ef422e47304d43568ae954e35c7b1764 560w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=840&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=c84e0935eb05be46679d57bb86219d07 840w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=1100&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=ee8dcaf98f8fd9dc65d5b7f17df1804a 1100w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=1650&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=d0b79382681256ab905af3fc0d7c5660 1650w, https://mintcdn.com/langchain-5e9cc07a/Fr2lazPB4XVeEA7l/langsmith/images/search-kv-filter-shortcut.png?w=2500&fit=max&auto=format&n=Fr2lazPB4XVeEA7l&q=85&s=8da0c834fad83b17d5cdf69bdd1ccb64 2500w\" />\n\n### Example: Filtering for tool calls\n\nIt's common to want to search for traces that contain specific tool calls. Tool calls are typically indicated in the output of an LLM run. To filter for tool calls, you would use the `Output Key` filter.\n\nWhile this example will show you how to filter for tool calls, the same logic can be applied to filter for any key-value pair in the output.\n\nIn this case, let's assume this is the output you want to filter for:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Creating and Applying Filters",
      "id": "creating-and-applying-filters"
    },
    {
      "level": "h3",
      "text": "Filtering by run attributes",
      "id": "filtering-by-run-attributes"
    },
    {
      "level": "h3",
      "text": "Filtering by time range",
      "id": "filtering-by-time-range"
    },
    {
      "level": "h3",
      "text": "Filter operators",
      "id": "filter-operators"
    },
    {
      "level": "h2",
      "text": "Specific Filtering Techniques",
      "id": "specific-filtering-techniques"
    },
    {
      "level": "h3",
      "text": "Filter for intermediate runs (spans)",
      "id": "filter-for-intermediate-runs-(spans)"
    },
    {
      "level": "h3",
      "text": "Filter based on inputs and outputs",
      "id": "filter-based-on-inputs-and-outputs"
    },
    {
      "level": "h3",
      "text": "Filter based on input / output key-value pairs",
      "id": "filter-based-on-input-/-output-key-value-pairs"
    },
    {
      "level": "h3",
      "text": "Example: Filtering for tool calls",
      "id": "example:-filtering-for-tool-calls"
    },
    {
      "level": "h3",
      "text": "Negative filtering on key-value pairs",
      "id": "negative-filtering-on-key-value-pairs"
    },
    {
      "level": "h2",
      "text": "Save a filter",
      "id": "save-a-filter"
    },
    {
      "level": "h2",
      "text": "Copy a filter",
      "id": "copy-a-filter"
    },
    {
      "level": "h2",
      "text": "Filtering runs within the trace view",
      "id": "filtering-runs-within-the-trace-view"
    },
    {
      "level": "h2",
      "text": "Manually specify a raw query in LangSmith query language",
      "id": "manually-specify-a-raw-query-in-langsmith-query-language"
    },
    {
      "level": "h2",
      "text": "Use an AI Query to auto-generate a query (Experimental)",
      "id": "use-an-ai-query-to-auto-generate-a-query-(experimental)"
    },
    {
      "level": "h2",
      "text": "Advanced filters",
      "id": "advanced-filters"
    },
    {
      "level": "h3",
      "text": "Filter for intermediate runs (spans) on properties of the root",
      "id": "filter-for-intermediate-runs-(spans)-on-properties-of-the-root"
    },
    {
      "level": "h3",
      "text": "Filter for runs (spans) whose child runs have some attribute",
      "id": "filter-for-runs-(spans)-whose-child-runs-have-some-attribute"
    },
    {
      "level": "h3",
      "text": "Example: Filtering on all runs whose tree contains the tool call filter",
      "id": "example:-filtering-on-all-runs-whose-tree-contains-the-tool-call-filter"
    }
  ],
  "url": "llms-txt#filter-traces",
  "links": []
}