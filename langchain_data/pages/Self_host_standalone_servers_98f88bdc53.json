{
  "title": "Self-host standalone servers",
  "content": "Source: https://docs.langchain.com/langsmith/deploy-standalone-server\n\nThis guide shows you how to deploy **standalone <Tooltip tip=\"The server that runs your LangGraph applications.\">Agent Servers</Tooltip>** without the LangSmith UI or control plane. This is the most lightweight self-hosting option for running one or a few agents as independent services.\n\n<Warning>\n  This deployment option provides flexibility but requires you to manage your own infrastructure and configuration.\n\nFor production workloads, consider [self-hosting the full LangSmith platform](/langsmith/self-hosted) or [deploying with the control plane](/langsmith/deploy-with-control-plane), which offer standardized deployment patterns and UI-based management.\n</Warning>\n\n<Note>\n  **This is the setup page for deploying Agent Servers directly without the LangSmith platform.**\n\nReview the [self-hosted options](/langsmith/self-hosted) to understand:\n\n* [Standalone Server](/langsmith/self-hosted#standalone-server): What this guide covers (no UI, just servers).\n  * [LangSmith](/langsmith/self-hosted#langsmith): For the full LangSmith platform with UI.\n  * [LangSmith Deployment](/langsmith/self-hosted#langsmith-deployment): For UI-based deployment management.\n\nBefore continuing, review the [standalone server overview](/langsmith/self-hosted#standalone-server).\n</Note>\n\n1. Use the [LangGraph CLI](/langsmith/cli) to [test your application locally](/langsmith/local-server).\n2. Use the [LangGraph CLI](/langsmith/cli) to build a Docker image (i.e. `langgraph build`).\n3. The following environment variables are needed for a data plane deployment.\n4. `REDIS_URI`: Connection details to a Redis instance. Redis will be used as a pub-sub broker to enable streaming real time output from background runs. The value of `REDIS_URI` must be a valid [Redis connection URI](https://redis-py.readthedocs.io/en/stable/connections.html#redis.Redis.from_url).\n\n<Note>\n     **Shared Redis Instance**\n     Multiple self-hosted deployments can share the same Redis instance. For example, for `Deployment A`, `REDIS_URI` can be set to `redis://<hostname_1>:<port>/1` and for `Deployment B`, `REDIS_URI` can be set to `redis://<hostname_1>:<port>/2`.\n\n`1` and `2` are different database numbers within the same instance, but `<hostname_1>` is shared. **The same database number cannot be used for separate deployments**.\n   </Note>\n5. `DATABASE_URI`: Postgres connection details. Postgres will be used to store assistants, threads, runs, persist thread state and long term memory, and to manage the state of the background task queue with 'exactly once' semantics. The value of `DATABASE_URI` must be a valid [Postgres connection URI](https://www.postgresql.org/docs/current/libpq-connect.html#LIBPQ-CONNSTRING-URIS).\n\n<Note>\n     **Shared Postgres Instance**\n     Multiple self-hosted deployments can share the same Postgres instance. For example, for `Deployment A`, `DATABASE_URI` can be set to `postgres://<user>:<password>@/<database_name_1>?host=<hostname_1>` and for `Deployment B`, `DATABASE_URI` can be set to `postgres://<user>:<password>@/<database_name_2>?host=<hostname_1>`.\n\n`<database_name_1>` and `database_name_2` are different databases within the same instance, but `<hostname_1>` is shared. **The same database cannot be used for separate deployments**.\n   </Note>\n6. `LANGSMITH_API_KEY`: LangSmith API key.\n7. `LANGGRAPH_CLOUD_LICENSE_KEY`: LangSmith license key. This will be used to authenticate ONCE at server start up.\n8. `LANGSMITH_ENDPOINT`: To send traces to a [self-hosted LangSmith](/langsmith/self-hosted) instance, set `LANGSMITH_ENDPOINT` to the hostname of the self-hosted LangSmith instance.\n9. Egress to `https://beacon.langchain.com` from your network. This is required for license verification and usage reporting if not running in air-gapped mode. See the [Egress documentation](/langsmith/self-host-egress) for more details.\n\nUse this [Helm chart](https://github.com/langchain-ai/helm/blob/main/charts/langgraph-cloud/README.md) to deploy an Agent Server to a Kubernetes cluster.\n\nRun the following `docker` command:\n\n<Note>\n  * You need to replace `my-image` with the name of the image you built in the prerequisite steps (from `langgraph build`)\n\nand you should provide appropriate values for `REDIS_URI`, `DATABASE_URI`, and `LANGSMITH_API_KEY`.\n\n* If your application requires additional environment variables, you can pass them in a similar way.\n</Note>\n\nDocker Compose YAML file:\n\nYou can run the command `docker compose up` with this Docker Compose file in the same folder.\n\nThis will launch an Agent Server on port `8123` (if you want to change this, you can change this by changing the ports in the `langgraph-api` volume). You can test if the application is healthy by running:\n\nAssuming everything is running correctly, you should see a response like:\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/deploy-standalone-server.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "<Note>\n  * You need to replace `my-image` with the name of the image you built in the prerequisite steps (from `langgraph build`)\n\n  and you should provide appropriate values for `REDIS_URI`, `DATABASE_URI`, and `LANGSMITH_API_KEY`.\n\n  * If your application requires additional environment variables, you can pass them in a similar way.\n</Note>\n\n## Docker Compose\n\nDocker Compose YAML file:",
      "language": "unknown"
    },
    {
      "code": "You can run the command `docker compose up` with this Docker Compose file in the same folder.\n\nThis will launch an Agent Server on port `8123` (if you want to change this, you can change this by changing the ports in the `langgraph-api` volume). You can test if the application is healthy by running:",
      "language": "unknown"
    },
    {
      "code": "Assuming everything is running correctly, you should see a response like:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Kubernetes",
      "id": "kubernetes"
    },
    {
      "level": "h2",
      "text": "Docker",
      "id": "docker"
    },
    {
      "level": "h2",
      "text": "Docker Compose",
      "id": "docker-compose"
    }
  ],
  "url": "llms-txt#self-host-standalone-servers",
  "links": []
}