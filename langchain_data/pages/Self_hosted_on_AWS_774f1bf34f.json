{
  "title": "Self-hosted on AWS",
  "content": "Source: https://docs.langchain.com/langsmith/aws-self-hosted\n\nWhen running LangSmith on [Amazon Web Services (AWS)](https://aws.amazon.com/), you can set up in either [full self-hosted](/langsmith/self-hosted) or [hybrid](/langsmith/hybrid) mode. Full self-hosted mode deploys a complete LangSmith platform with observability functionality as well as the option to create agent deployments. Hybrid mode entails just the infrastructure to run agents in a data plane within your cloud, while our SaaS provides the control plane and observability functionality.\n\nThis page provides AWS-specific architecture patterns, service recommendations, and best practices for deploying and operating LangSmith on AWS.\n\n<Note>\n  LangChain provides Terraform modules specifically for AWS to help provision infrastructure for LangSmith. These modules can quickly set up EKS clusters, RDS, ElastiCache, S3, and networking resources.\n\nView the [AWS Terraform modules](https://github.com/langchain-ai/terraform/tree/main/modules/aws) for documentation and examples.\n</Note>\n\n## Reference architecture\n\nWe recommend leveraging AWS's managed services to provide a scalable, secure, and resilient platform. The following architecture applies to both self-hosted and hybrid and aligns with the [AWS Well-Architected Framework](https://aws.amazon.com/architecture/well-architected/):\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=c2ae668eb790588e05a86aaca8e8fc76\" alt=\"Architecture diagram showing AWS relations to LangSmith services\" data-og-width=\"2198\" width=\"2198\" data-og-height=\"1498\" height=\"1498\" data-path=\"langsmith/images/aws-architecture-self-hosted.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?w=280&fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=fcb5e9084862934ae10195f77dd38c95 280w, https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?w=560&fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=c98a9d506a44ad748443c54fe9d5f6cc 560w, https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?w=840&fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=374d8ded99973e8ba18d6968d404a702 840w, https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?w=1100&fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=033a9b1620a8978848ad571475466910 1100w, https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?w=1650&fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=fb293874556deb5b157678c76a24d245 1650w, https://mintcdn.com/langchain-5e9cc07a/MMsbRrh5gYIlD_3t/langsmith/images/aws-architecture-self-hosted.png?w=2500&fit=max&auto=format&n=MMsbRrh5gYIlD_3t&q=85&s=cb4f0323f3a0077df4f4506127e6004e 2500w\" />\n\n* <Icon icon=\"globe\" /> **Ingress & networking**: Requests enter via [Amazon Application Load Balancer (ALB)](https://aws.amazon.com/elasticloadbalancing/application-load-balancer/) within your [VPC](https://aws.amazon.com/vpc/), secured using [AWS WAF](https://aws.amazon.com/waf/) and [IAM](https://aws.amazon.com/iam/)-based authentication.\n\n* <Icon icon=\"cube\" /> **Frontend & backend services:** Containers run on [Amazon EKS](https://aws.amazon.com/eks/), orchestrated behind the ALB. routes requests to other services within the cluster as necessary.\n\n* <Icon icon=\"database\" /> **Storage & databases:**\n  * [Amazon RDS for PostgreSQL](https://aws.amazon.com/rds/postgresql/) or [Aurora](https://aws.amazon.com/rds/aurora/): metadata, projects, users, and short-term and long-term memory for deployed agents. LangSmith supports PostgreSQL version 14 or higher.\n  * [Amazon ElastiCache (Redis)](https://aws.amazon.com/elasticache/redis/): caching and job queues. ElastiCache can be in single-instance or cluster mode, running Redis OSS version 5 or higher.\n  * ClickHouse + [Amazon EBS](https://aws.amazon.com/ebs/): analytics and trace storage.\n    * We recommend using an [externally managed ClickHouse solution](/langsmith/self-host-external-clickhouse) unless security or compliance reasons\n      prevent you from doing so.\n    * ClickHouse is not required for hybrid deployments.\n  * [Amazon S3](https://aws.amazon.com/s3/): object storage for trace artifacts and telemetry.\n\n* <Icon icon=\"sparkles\" /> **LLM integration:** Optionally proxy requests to [Amazon Bedrock](https://aws.amazon.com/bedrock/) or [Amazon SageMaker](https://aws.amazon.com/sagemaker/) for LLM inference.\n\n* <Icon icon=\"chart-line\" /> **Monitoring & observability:** Integrate with [Amazon CloudWatch](https://aws.amazon.com/cloudwatch/)\n\nLangSmith supports multiple compute options depending on your requirements:\n\n| Compute option                             | Description                               | Suitable for                         |\n| ------------------------------------------ | ----------------------------------------- | ------------------------------------ |\n| **Elastic Kubernetes Service (preferred)** | Advanced scaling and multi-tenant support | Large enterprises                    |\n| **EC2-based**                              | Full control, BYO-infra                   | Regulated or air-gapped environments |\n\n## AWS Well-Architected best practices\n\nThis reference is designed to align with the six pillars of the AWS Well-Architected Framework:\n\n### Operational excellence\n\n* Automate deployments with IaC ([CloudFormation](https://aws.amazon.com/cloudformation/) / [Terraform](https://www.terraform.io/)).\n* Use [AWS Systems Manager Parameter Store](https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html) for configuration.\n* Configure your LangSmith instance to [export telemetry data](/langsmith/export-backend) and continuously monitor via [CloudWatch Logs](https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html).\n* The preferred method to manage [LangSmith deployments](/langsmith/deployments) is to create a CI process that builds [Agent Server](/langsmith/agent-server) images and pushes them to [ECR](https://aws.amazon.com/ecr/). Create a test deployment for pull requests before deploying a new revision to staging or production upon PR merge.\n\n* Use [IAM](https://aws.amazon.com/iam/) roles with least-privilege policies.\n* Enable encryption at rest ([RDS](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Overview.Encryption.html), [S3](https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingEncryption.html), ClickHouse volumes) and in transit (TLS 1.2+).\n* Integrate with [AWS Secrets Manager](https://aws.amazon.com/secrets-manager/) for credentials.\n* Use [Amazon Cognito](https://aws.amazon.com/cognito/) as an IDP in conjunction with LangSmith's built-in authentication and authorization features to secure access to agents and their tools.\n\n* Replicate the LangSmith [data plane](/langsmith/data-plane) across regions: Deploy identical data planes to Kubernetes clusters in different regions for LangSmith Deployment. Deploy [RDS](https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/Concepts.MultiAZSingleStandby.html) and [ECS](https://aws.amazon.com/ecs/) services across [Multi-AZ](https://aws.amazon.com/about-aws/global-infrastructure/regions_az/).\n* Implement [auto-scaling](https://aws.amazon.com/autoscaling/) for backend workers.\n* Use [Amazon Route 53](https://aws.amazon.com/route53/) health checks and failover policies.\n\n### Performance efficiency\n\n* Leverage [EC2](https://aws.amazon.com/ec2/) instances for optimized compute.\n* Use [S3 Intelligent-Tiering](https://aws.amazon.com/s3/storage-classes/intelligent-tiering/) for infrequently accessed trace data.\n\n### Cost optimization\n\n* Right-size [EKS](https://aws.amazon.com/eks/) clusters using [Compute Savings Plans](https://aws.amazon.com/savingsplans/compute-pricing/).\n* Monitor cost KPIs using [AWS Cost Explorer](https://aws.amazon.com/aws-cost-management/aws-cost-explorer/) dashboards.\n\n* Minimize idle workloads with on-demand compute.\n* Store telemetry in low-latency, low-cost tiers.\n* Enable auto-shutdown for non-prod environments.\n\n## Security and compliance\n\nLangSmith can be configured for:\n\n* [PrivateLink](https://aws.amazon.com/privatelink/)-only access (no public internet exposure, besides egress necessary for billing).\n* [KMS](https://aws.amazon.com/kms/)-based encryption keys for S3, RDS, and EBS.\n* Audit logging to [CloudWatch](https://aws.amazon.com/cloudwatch/) and [AWS CloudTrail](https://aws.amazon.com/cloudtrail/).\n\nCustomers can deploy in [GovCloud](https://aws.amazon.com/govcloud-us/), ISO, or HIPAA regions as needed.\n\n## Monitoring and evals\n\n* Capture traces from LLM apps running on [Bedrock](https://aws.amazon.com/bedrock/) or [SageMaker](https://aws.amazon.com/sagemaker/).\n* Evaluate model outputs via [LangSmith datasets](/langsmith/manage-datasets).\n* Track latency, token usage, and success rates.\n\n* [AWS CloudWatch](https://aws.amazon.com/cloudwatch/) dashboards.\n* [OpenTelemetry](https://opentelemetry.io/) and [Prometheus](https://prometheus.io/) exporters.\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/aws-self-hosted.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [],
  "headings": [
    {
      "level": "h2",
      "text": "Reference architecture",
      "id": "reference-architecture"
    },
    {
      "level": "h2",
      "text": "Compute options",
      "id": "compute-options"
    },
    {
      "level": "h2",
      "text": "AWS Well-Architected best practices",
      "id": "aws-well-architected-best-practices"
    },
    {
      "level": "h3",
      "text": "Operational excellence",
      "id": "operational-excellence"
    },
    {
      "level": "h3",
      "text": "Security",
      "id": "security"
    },
    {
      "level": "h3",
      "text": "Reliability",
      "id": "reliability"
    },
    {
      "level": "h3",
      "text": "Performance efficiency",
      "id": "performance-efficiency"
    },
    {
      "level": "h3",
      "text": "Cost optimization",
      "id": "cost-optimization"
    },
    {
      "level": "h3",
      "text": "Sustainability",
      "id": "sustainability"
    },
    {
      "level": "h2",
      "text": "Security and compliance",
      "id": "security-and-compliance"
    },
    {
      "level": "h2",
      "text": "Monitoring and evals",
      "id": "monitoring-and-evals"
    }
  ],
  "url": "llms-txt#self-hosted-on-aws",
  "links": []
}