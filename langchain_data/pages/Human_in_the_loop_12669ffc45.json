{
  "title": "Human-in-the-loop",
  "content": "Source: https://docs.langchain.com/oss/python/langchain/human-in-the-loop\n\nThe Human-in-the-Loop (HITL) [middleware](/oss/python/langchain/middleware/built-in#human-in-the-loop) lets you add human oversight to agent tool calls.\nWhen a model proposes an action that might require review — for example, writing to a file or executing SQL — the middleware can pause execution and wait for a decision.\n\nIt does this by checking each tool call against a configurable policy. If intervention is needed, the middleware issues an [interrupt](https://reference.langchain.com/python/langgraph/types/#langgraph.types.interrupt) that halts execution. The graph state is saved using LangGraph's [persistence layer](/oss/python/langgraph/persistence), so execution can pause safely and resume later.\n\nA human decision then determines what happens next: the action can be approved as-is (`approve`), modified before running (`edit`), or rejected with feedback (`reject`).\n\n## Interrupt decision types\n\nThe [middleware](/oss/python/langchain/middleware/built-in#human-in-the-loop) defines three built-in ways a human can respond to an interrupt:\n\n| Decision Type | Description                                                               | Example Use Case                                    |\n| ------------- | ------------------------------------------------------------------------- | --------------------------------------------------- |\n| ✅ `approve`   | The action is approved as-is and executed without changes.                | Send an email draft exactly as written              |\n| ✏️ `edit`     | The tool call is executed with modifications.                             | Change the recipient before sending an email        |\n| ❌ `reject`    | The tool call is rejected, with an explanation added to the conversation. | Reject an email draft and explain how to rewrite it |\n\nThe available decision types for each tool depend on the policy you configure in `interrupt_on`.\nWhen multiple tool calls are paused at the same time, each action requires a separate decision.\nDecisions must be provided in the same order as the actions appear in the interrupt request.\n\n<Tip>\n  When **editing** tool arguments, make changes conservatively. Significant modifications to the original arguments may cause the model to re-evaluate its approach and potentially execute the tool multiple times or take unexpected actions.\n</Tip>\n\n## Configuring interrupts\n\nTo use HITL, add the [middleware](/oss/python/langchain/middleware/built-in#human-in-the-loop) to the agent's `middleware` list when creating the agent.\n\nYou configure it with a mapping of tool actions to the decision types that are allowed for each action. The middleware will interrupt execution when a tool call matches an action in the mapping.\n\n<Info>\n  You must configure a checkpointer to persist the graph state across interrupts.\n  In production, use a persistent checkpointer like [`AsyncPostgresSaver`](https://reference.langchain.com/python/langgraph/checkpoints/#langgraph.checkpoint.postgres.aio.AsyncPostgresSaver). For testing or prototyping, use [`InMemorySaver`](https://reference.langchain.com/python/langgraph/checkpoints/#langgraph.checkpoint.memory.InMemorySaver).\n\nWhen invoking the agent, pass a `config` that includes the **thread ID** to associate execution with a conversation thread.\n  See the [LangGraph interrupts documentation](/oss/python/langgraph/interrupts) for details.\n</Info>\n\n<Accordion title=\"Configuration options\">\n  <ParamField body=\"interrupt_on\" type=\"dict\" required>\n    Mapping of tool names to approval configs. Values can be `True` (interrupt with default config), `False` (auto-approve), or an `InterruptOnConfig` object.\n  </ParamField>\n\n<ParamField body=\"description_prefix\" type=\"string\" default=\"Tool execution requires approval\">\n    Prefix for action request descriptions\n  </ParamField>\n\n**`InterruptOnConfig` options:**\n\n<ParamField body=\"allowed_decisions\" type=\"list[string]\">\n    List of allowed decisions: `'approve'`, `'edit'`, or `'reject'`\n  </ParamField>\n\n<ParamField body=\"description\" type=\"string | callable\">\n    Static string or callable function for custom description\n  </ParamField>\n</Accordion>\n\n## Responding to interrupts\n\nWhen you invoke the agent, it runs until it either completes or an interrupt is raised. An interrupt is triggered when a tool call matches the policy you configured in `interrupt_on`. In that case, the invocation result will include an `__interrupt__` field with the actions that require review. You can then present those actions to a reviewer and resume execution once decisions are provided.\n\n```python  theme={null}\nfrom langgraph.types import Command",
  "code_samples": [
    {
      "code": "<Info>\n  You must configure a checkpointer to persist the graph state across interrupts.\n  In production, use a persistent checkpointer like [`AsyncPostgresSaver`](https://reference.langchain.com/python/langgraph/checkpoints/#langgraph.checkpoint.postgres.aio.AsyncPostgresSaver). For testing or prototyping, use [`InMemorySaver`](https://reference.langchain.com/python/langgraph/checkpoints/#langgraph.checkpoint.memory.InMemorySaver).\n\n  When invoking the agent, pass a `config` that includes the **thread ID** to associate execution with a conversation thread.\n  See the [LangGraph interrupts documentation](/oss/python/langgraph/interrupts) for details.\n</Info>\n\n<Accordion title=\"Configuration options\">\n  <ParamField body=\"interrupt_on\" type=\"dict\" required>\n    Mapping of tool names to approval configs. Values can be `True` (interrupt with default config), `False` (auto-approve), or an `InterruptOnConfig` object.\n  </ParamField>\n\n  <ParamField body=\"description_prefix\" type=\"string\" default=\"Tool execution requires approval\">\n    Prefix for action request descriptions\n  </ParamField>\n\n  **`InterruptOnConfig` options:**\n\n  <ParamField body=\"allowed_decisions\" type=\"list[string]\">\n    List of allowed decisions: `'approve'`, `'edit'`, or `'reject'`\n  </ParamField>\n\n  <ParamField body=\"description\" type=\"string | callable\">\n    Static string or callable function for custom description\n  </ParamField>\n</Accordion>\n\n## Responding to interrupts\n\nWhen you invoke the agent, it runs until it either completes or an interrupt is raised. An interrupt is triggered when a tool call matches the policy you configured in `interrupt_on`. In that case, the invocation result will include an `__interrupt__` field with the actions that require review. You can then present those actions to a reviewer and resume execution once decisions are provided.",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Interrupt decision types",
      "id": "interrupt-decision-types"
    },
    {
      "level": "h2",
      "text": "Configuring interrupts",
      "id": "configuring-interrupts"
    },
    {
      "level": "h2",
      "text": "Responding to interrupts",
      "id": "responding-to-interrupts"
    }
  ],
  "url": "llms-txt#human-in-the-loop",
  "links": []
}