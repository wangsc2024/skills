{
  "title": "Enable LangSmith Deployment",
  "content": "Source: https://docs.langchain.com/langsmith/deploy-self-hosted-full-platform\n\nThis guide shows you how to enable **LangSmith Deployment** on your [self-hosted LangSmith instance](/langsmith/kubernetes). This adds a [control plane](/langsmith/control-plane) and [data plane](/langsmith/data-plane) that let you deploy, scale, and manage agents and applications directly through the LangSmith UI.\n\nAfter completing this guide, you'll have access to LangSmith [Observability](/langsmith/observability), [Evaluation](/langsmith/evaluation), and [Deployment](/langsmith/deployments).\n\n<Info>**Important**<br /> Enabling LangSmith Deployment requires an [Enterprise](https://langchain.com/pricing) plan. </Info>\n\n<Note>\n  **This setup page is for enabling [LangSmith Deployment](/langsmith/deployments) on an existing LangSmith instance.**\n\nReview the [self-hosted options](/langsmith/self-hosted) to understand:\n\n* [LangSmith (observability)](/langsmith/self-hosted#langsmith): What you should install first.\n  * [LangSmith Deployment](/langsmith/self-hosted#langsmith-deployment): What this guide enables.\n  * [Standalone Server](/langsmith/self-hosted#standalone-server): Lightweight alternative without the UI.\n</Note>\n\nThis guide builds on top of the [Kubernetes installation guide](/langsmith/kubernetes). **You must complete that guide first** before continuing. This page covers the additional setup steps required to enable LangSmith Deployment:\n\n* Installing the LangGraph operator\n* Configuring your ingress\n* Connecting to the control plane\n\n1. You are using Kubernetes.\n2. You have an instance of [self-hosted LangSmith](/langsmith/kubernetes) running.\n3. `KEDA` is installed on your cluster.\n\n6. Ingress Configuration\n   1. You must set up an ingress, gateway, or use Istio for your LangSmith instance. All agents will be deployed as Kubernetes services behind this ingress. Use this guide to [set up an ingress](/langsmith/self-host-ingress) for your instance.\n7. You must have slack space in your cluster for multiple deployments. `Cluster-Autoscaler` is recommended to automatically provision new nodes.\n8. A valid Dynamic PV provisioner or PVs available on your cluster. You can verify this by running:\n\n9. Egress to `https://beacon.langchain.com` from your network. This is required for license verification and usage reporting if not running in air-gapped mode. See the [Egress documentation](/langsmith/self-host-egress) for more details.\n\n1. As part of configuring your self-hosted LangSmith instance, you enable the `deployment` option. This will provision a few key resources.\n   1. `listener`: This is a service that listens to the [control plane](/langsmith/control-plane) for changes to your deployments and creates/updates downstream CRDs.\n   2. `LangGraphPlatform CRD`: A CRD for LangSmith Deployment. This contains the spec for managing an instance of a LangSmith deployment.\n   3. `operator`: This operator handles changes to your LangSmith CRDs.\n   4. `host-backend`: This is the [control plane](/langsmith/control-plane).\n\n<Note>\n  As of v0.12.0, the `langgraphPlatform` option is deprecated. Use `config.deployment` for any version after v0.12.0.\n</Note>\n\n2. Two additional images will be used by the chart. Use the images that are specified in the latest release.\n\n3. In your config file for langsmith (usually `langsmith_config.yaml`), enable the `deployment` option. Note that you must also have a valid ingress setup:\n\n4. In your `values.yaml` file, configure the `hostBackendImage` and `operatorImage` options (if you need to mirror images). If you are using a private container registry that requires authentication, you must also configure `imagePullSecrets`, refer to [Configure authentication for private registries](#optional-configure-authentication-for-private-registries).\n\n5. You can also configure base templates for your agents by overriding the base templates [here](https://github.com/langchain-ai/helm/blob/main/charts/langsmith/values.yaml#L898).\n\nYour self-hosted infrastructure is now ready to create deployments.\n\n## (Optional) Configure additional data planes\n\nIn addition to the existing data plane already created in the above steps, you can create more data planes that reside in different Kubernetes clusters or the same cluster in a different namespace.\n\n1. Read through the cluster organization guide in the [hybrid deployment documentation](/langsmith/hybrid#listeners) to understand how to best organize this for your use case.\n2. Verify the prerequisites mentioned in the [hybrid](/langsmith/deploy-hybrid#prerequisites) section are met for the new cluster. Note that in step 5 of [this section](/langsmith/deploy-hybrid#prerequisites), you need to enable egress to your [self-hosted LangSmith instance](/langsmith/self-host-usage#configuring-the-application-you-want-to-use-with-langsmith) instead of [https://api.host.langchain.com](https://api.host.langchain.com) and [https://api.smith.langchain.com](https://api.smith.langchain.com).\n3. Run the following commands against your LangSmith Postgres instance to enable this feature. This is the [Postgres instance](/langsmith/kubernetes#validate-your-deployment%3A) that comes with your self-hosted LangSmith setup.\n\nNote down the workspace ID you choose as you will need this for future steps.\n\n### Deploying to a different cluster\n\n1. Follow steps 2-6 in the [hybrid setup guide](/langsmith/deploy-hybrid#setup). The `config.langsmithWorkspaceId` value should be set to the workspace ID you noted in the prerequisites.\n2. To deploy more than one data plane to the cluster, follow the rules listed [here](/langsmith/deploy-hybrid#configuring-additional-data-planes-in-the-same-cluster).\n\n### Deploying to a different namespace in the same cluster\n\n1. You will need to make some modifications to the `langsmith_config.yaml` file you created in step 3 of the [above setup instructions](/langsmith/deploy-self-hosted-full-platform#setup):\n   * Set the `operator.watchNamespaces` field to the current namespace your self-hosted LangSmith instance is running in. This is to prevent clashes with the operator that will be added as part of the new data plane.\n   * It is required to use the [Gateway API](/langsmith/self-host-ingress#option-2%3A-gateway-api) or an [Istio Gateway](/langsmith/self-host-ingress#option-3%3A-istio-gateway). Please adjust your `langsmith_config.yaml` file accordingly.\n2. Run a `helm upgrade` to update your self hosted LangSmith instance with the new config.\n3. Follow steps 2-6 in the [hybrid setup guide](/langsmith/deploy-hybrid#setup). The `config.langsmithWorkspaceId` value should be set to the workspace ID you noted in the prerequisites. Remember that `config.watchNamespaces` should be set to different namespaces than the one used by the existing data plane!\n\n## (Optional) Configure authentication for private registries\n\nIf your [Agent Server deployments](/langsmith/agent-server) will use images from private container registries (e.g., AWS ECR, Azure ACR, GCP Artifact Registry, private Docker registry), configure image pull secrets. This is a one-time infrastructure configuration that allows all deployments to automatically authenticate with your private registry.\n\n**Step 1: Create a Kubernetes image pull secret**\n\nReplace the values with your registry credentials:\n\n* `myregistry.com`: Your registry URL\n* `your-username`: Your registry username\n* `your-password`: Your registry password or access token\n* `langsmith`: The Kubernetes namespace where LangSmith is installed\n\n**Step 2: Configure the deployment template in your `values.yaml`**\n\nTo enable agent server deployments to use the private registry secret, you must add `imagePullSecrets` to the operator's deployment template:\n\n**Step 3: Apply during Helm installation/upgrade**\n\nWhen you deploy or upgrade your LangSmith instance using Helm, this configuration will be applied. All user deployments created through the LangSmith UI will automatically inherit these registry credentials.\n\nFor registry-specific authentication methods (AWS ECR, Azure ACR, GCP Artifact Registry, etc.), refer to the [Kubernetes documentation on pulling images from private registries](https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/).\n\nOnce your infrastructure is set up, you're ready to deploy applications. See the deployment guides in the [Deployment tab](/langsmith/deployments) for instructions on building and deploying your applications.\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/deploy-self-hosted-full-platform.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "6. Ingress Configuration\n   1. You must set up an ingress, gateway, or use Istio for your LangSmith instance. All agents will be deployed as Kubernetes services behind this ingress. Use this guide to [set up an ingress](/langsmith/self-host-ingress) for your instance.\n7. You must have slack space in your cluster for multiple deployments. `Cluster-Autoscaler` is recommended to automatically provision new nodes.\n8. A valid Dynamic PV provisioner or PVs available on your cluster. You can verify this by running:",
      "language": "unknown"
    },
    {
      "code": "9. Egress to `https://beacon.langchain.com` from your network. This is required for license verification and usage reporting if not running in air-gapped mode. See the [Egress documentation](/langsmith/self-host-egress) for more details.\n\n## Setup\n\n1. As part of configuring your self-hosted LangSmith instance, you enable the `deployment` option. This will provision a few key resources.\n   1. `listener`: This is a service that listens to the [control plane](/langsmith/control-plane) for changes to your deployments and creates/updates downstream CRDs.\n   2. `LangGraphPlatform CRD`: A CRD for LangSmith Deployment. This contains the spec for managing an instance of a LangSmith deployment.\n   3. `operator`: This operator handles changes to your LangSmith CRDs.\n   4. `host-backend`: This is the [control plane](/langsmith/control-plane).\n\n<Note>\n  As of v0.12.0, the `langgraphPlatform` option is deprecated. Use `config.deployment` for any version after v0.12.0.\n</Note>\n\n2. Two additional images will be used by the chart. Use the images that are specified in the latest release.",
      "language": "unknown"
    },
    {
      "code": "3. In your config file for langsmith (usually `langsmith_config.yaml`), enable the `deployment` option. Note that you must also have a valid ingress setup:",
      "language": "unknown"
    },
    {
      "code": "4. In your `values.yaml` file, configure the `hostBackendImage` and `operatorImage` options (if you need to mirror images). If you are using a private container registry that requires authentication, you must also configure `imagePullSecrets`, refer to [Configure authentication for private registries](#optional-configure-authentication-for-private-registries).\n\n5. You can also configure base templates for your agents by overriding the base templates [here](https://github.com/langchain-ai/helm/blob/main/charts/langsmith/values.yaml#L898).\n\n   Your self-hosted infrastructure is now ready to create deployments.\n\n## (Optional) Configure additional data planes\n\nIn addition to the existing data plane already created in the above steps, you can create more data planes that reside in different Kubernetes clusters or the same cluster in a different namespace.\n\n### Prerequisites\n\n1. Read through the cluster organization guide in the [hybrid deployment documentation](/langsmith/hybrid#listeners) to understand how to best organize this for your use case.\n2. Verify the prerequisites mentioned in the [hybrid](/langsmith/deploy-hybrid#prerequisites) section are met for the new cluster. Note that in step 5 of [this section](/langsmith/deploy-hybrid#prerequisites), you need to enable egress to your [self-hosted LangSmith instance](/langsmith/self-host-usage#configuring-the-application-you-want-to-use-with-langsmith) instead of [https://api.host.langchain.com](https://api.host.langchain.com) and [https://api.smith.langchain.com](https://api.smith.langchain.com).\n3. Run the following commands against your LangSmith Postgres instance to enable this feature. This is the [Postgres instance](/langsmith/kubernetes#validate-your-deployment%3A) that comes with your self-hosted LangSmith setup.",
      "language": "unknown"
    },
    {
      "code": "Note down the workspace ID you choose as you will need this for future steps.\n\n### Deploying to a different cluster\n\n1. Follow steps 2-6 in the [hybrid setup guide](/langsmith/deploy-hybrid#setup). The `config.langsmithWorkspaceId` value should be set to the workspace ID you noted in the prerequisites.\n2. To deploy more than one data plane to the cluster, follow the rules listed [here](/langsmith/deploy-hybrid#configuring-additional-data-planes-in-the-same-cluster).\n\n### Deploying to a different namespace in the same cluster\n\n1. You will need to make some modifications to the `langsmith_config.yaml` file you created in step 3 of the [above setup instructions](/langsmith/deploy-self-hosted-full-platform#setup):\n   * Set the `operator.watchNamespaces` field to the current namespace your self-hosted LangSmith instance is running in. This is to prevent clashes with the operator that will be added as part of the new data plane.\n   * It is required to use the [Gateway API](/langsmith/self-host-ingress#option-2%3A-gateway-api) or an [Istio Gateway](/langsmith/self-host-ingress#option-3%3A-istio-gateway). Please adjust your `langsmith_config.yaml` file accordingly.\n2. Run a `helm upgrade` to update your self hosted LangSmith instance with the new config.\n3. Follow steps 2-6 in the [hybrid setup guide](/langsmith/deploy-hybrid#setup). The `config.langsmithWorkspaceId` value should be set to the workspace ID you noted in the prerequisites. Remember that `config.watchNamespaces` should be set to different namespaces than the one used by the existing data plane!\n\n## (Optional) Configure authentication for private registries\n\nIf your [Agent Server deployments](/langsmith/agent-server) will use images from private container registries (e.g., AWS ECR, Azure ACR, GCP Artifact Registry, private Docker registry), configure image pull secrets. This is a one-time infrastructure configuration that allows all deployments to automatically authenticate with your private registry.\n\n**Step 1: Create a Kubernetes image pull secret**",
      "language": "unknown"
    },
    {
      "code": "Replace the values with your registry credentials:\n\n* `myregistry.com`: Your registry URL\n* `your-username`: Your registry username\n* `your-password`: Your registry password or access token\n* `langsmith`: The Kubernetes namespace where LangSmith is installed\n\n**Step 2: Configure the deployment template in your `values.yaml`**\n\nTo enable agent server deployments to use the private registry secret, you must add `imagePullSecrets` to the operator's deployment template:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Overview",
      "id": "overview"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Setup",
      "id": "setup"
    },
    {
      "level": "h2",
      "text": "(Optional) Configure additional data planes",
      "id": "(optional)-configure-additional-data-planes"
    },
    {
      "level": "h3",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h3",
      "text": "Deploying to a different cluster",
      "id": "deploying-to-a-different-cluster"
    },
    {
      "level": "h3",
      "text": "Deploying to a different namespace in the same cluster",
      "id": "deploying-to-a-different-namespace-in-the-same-cluster"
    },
    {
      "level": "h2",
      "text": "(Optional) Configure authentication for private registries",
      "id": "(optional)-configure-authentication-for-private-registries"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    }
  ],
  "url": "llms-txt#enable-langsmith-deployment",
  "links": []
}