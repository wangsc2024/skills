{
  "title": "Setup claude_agent_sdk with langsmith tracing",
  "content": "configure_claude_agent_sdk()\n\n@tool(\n    \"get_weather\",\n    \"Gets the current weather for a given city\",\n    {\n        \"city\": str,\n    },\n)\nasync def get_weather(args: dict[str, Any]) -> dict[str, Any]:\n    \"\"\"Simulated weather lookup tool\"\"\"\n    city = args[\"city\"]\n\n# Simulated weather data\n    weather_data = {\n        \"San Francisco\": \"Foggy, 62째F\",\n        \"New York\": \"Sunny, 75째F\",\n        \"London\": \"Rainy, 55째F\",\n        \"Tokyo\": \"Clear, 68째F\",\n    }\n\nweather = weather_data.get(city, \"Weather data not available\")\n    return {\"content\": [{\"type\": \"text\", \"text\": f\"Weather in {city}: {weather}\"}]}\n\nasync def main():\n    # Create SDK MCP server with the weather tool\n    weather_server = create_sdk_mcp_server(\n        name=\"weather\",\n        version=\"1.0.0\",\n        tools=[get_weather],\n    )\n\noptions = ClaudeAgentOptions(\n        model=\"claude-sonnet-4-5-20250929\",\n        system_prompt=\"You are a friendly travel assistant who helps with weather information.\",\n        mcp_servers={\"weather\": weather_server},\n        allowed_tools=[\"mcp__weather__get_weather\"],\n    )\n\nasync with ClaudeSDKClient(options=options) as client:\n        await client.query(\"What's the weather like in San Francisco and Tokyo?\")\n\nasync for message in client.receive_response():\n            print(message)\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```\n\nOnce configured, all Claude Agent SDK operations will be automatically traced to LangSmith, including:\n\n* Agent queries and responses\n* Tool invocations and results\n* Claude model interactions\n* MCP server operations\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/trace-claude-agent-sdk.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [],
  "headings": [],
  "url": "llms-txt#setup-claude_agent_sdk-with-langsmith-tracing",
  "links": []
}