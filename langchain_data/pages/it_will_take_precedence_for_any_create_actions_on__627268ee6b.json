{
  "title": "it will take precedence for any \"create\" actions on the \"threads\" resources",
  "content": "@auth.on.threads.create\nasync def on_thread_create(\n    ctx: Auth.types.AuthContext,\n    value: Auth.types.threads.create.value\n):\n    # Reject if the user does not have write access\n    if \"write\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"User lacks the required permissions.\"\n        )\n    # Setting metadata on the thread being created\n    # will ensure that the resource contains an \"owner\" field\n    # Then any time a user tries to access this thread or runs within the thread,\n    # we can filter by owner\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    return {\"owner\": ctx.user.identity}",
  "code_samples": [],
  "headings": [],
  "url": "llms-txt#it-will-take-precedence-for-any-\"create\"-actions-on-the-\"threads\"-resources",
  "links": []
}