{
  "title": "The above chain will be traced as a child run of the traceable function",
  "content": "@traceable(\n    tags=[\"openai\", \"chat\"],\n    metadata={\"foo\": \"bar\"}\n)\ndef invoke_runnnable(question, context):\n    result = chain.invoke({\"question\": question, \"context\": context})\n    return \"The response is: \" + result\n\ninvoke_runnnable(\"Can you summarize this morning's meetings?\", \"During this morning's meeting, we solved all world conflict.\")\ntypescript  theme={null}\nimport { ChatOpenAI } from \"@langchain/openai\";\nimport { ChatPromptTemplate } from \"@langchain/core/prompts\";\nimport { StringOutputParser } from \"@langchain/core/output_parsers\";\nimport { getLangchainCallbacks } from \"langsmith/langchain\";\n\nconst prompt = ChatPromptTemplate.fromMessages([\n  [\n    \"system\",\n    \"You are a helpful assistant. Please respond to the user's request only based on the given context.\",\n  ],\n  [\"user\", \"Question: {question}\\nContext: {context}\"],\n]);\n\nconst model = new ChatOpenAI({ modelName: \"gpt-4o-mini\" });\nconst outputParser = new StringOutputParser();\nconst chain = prompt.pipe(model).pipe(outputParser);\n\nconst main = traceable(\n  async (input: { question: string; context: string }) => {\n    const callbacks = await getLangchainCallbacks();\n    const response = await chain.invoke(input, { callbacks });\n    return response;\n  },\n  { name: \"main\" }\n);\ntypescript  theme={null}\nimport { traceable } from \"langsmith/traceable\";\nimport { RunnableLambda } from \"@langchain/core/runnables\";\nimport { RunnableConfig } from \"@langchain/core/runnables\";\n\nconst tracedChild = traceable((input: string) => `Child Run: ${input}`, {\n  name: \"Child Run\",\n});\n\nconst parrot = new RunnableLambda({\n  func: async (input: { text: string }, config?: RunnableConfig) => {\n    return await tracedChild(input.text);\n  },\n});\ntypescript Traceable theme={null}\n  import { traceable } from \"langsmith/traceable\";\n  import { RunnableLambda } from \"@langchain/core/runnables\";\n  import { RunnableConfig } from \"@langchain/core/runnables\";\n\nconst tracedChild = traceable((input: string) => `Child Run: ${input}`, {\n    name: \"Child Run\",\n  });\n\nconst parrot = new RunnableLambda({\n    func: async (input: { text: string }, config?: RunnableConfig) => {\n      // Pass the config to existing traceable function\n      await tracedChild(config, input.text);\n      return input.text;\n    },\n  });\n  typescript Run Tree theme={null}\n  import { RunTree } from \"langsmith/run_trees\";\n  import { RunnableLambda } from \"@langchain/core/runnables\";\n  import { RunnableConfig } from \"@langchain/core/runnables\";\n\nconst parrot = new RunnableLambda({\n    func: async (input: { text: string }, config?: RunnableConfig) => {\n      // create the RunTree from the RunnableConfig of the RunnableLambda\n      const childRunTree = RunTree.fromRunnableConfig(config, {\n        name: \"Child Run\",\n      });\n\nchildRunTree.inputs = { input: input.text };\n      await childRunTree.postRun();\n\nchildRunTree.outputs = { output: `Child Run: ${input.text}` };\n      await childRunTree.patchRun();\n\nreturn input.text;\n    },\n  });\n  ```\n</CodeGroup>\n\nIf you prefer a video tutorial, check out the [Alternative Ways to Trace video](https://academy.langchain.com/pages/intro-to-langsmith-preview) from the Introduction to LangSmith Course.\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/trace-with-langchain.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "This will produce the following trace tree: <img src=\"https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=52c64fd784522c4b2d75886ae76f8c18\" alt=\"Trace tree python interop\" data-og-width=\"1334\" width=\"1334\" data-og-height=\"734\" height=\"734\" data-path=\"langsmith/images/trace-tree-python-interop.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?w=280&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=21a424e2326767bb66a6b5a207390bec 280w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?w=560&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=72f1854193fd30317d1b69d8de433d73 560w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?w=840&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=34fa74aff75c11172b350d38319bf276 840w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?w=1100&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=4ebfb4252764af54033e62ad088f60b1 1100w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?w=1650&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=2d783eecf72ba0680e78a0f122bd4411 1650w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-python-interop.png?w=2500&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=9d977793e5281e5d255d962224bd70df 2500w\" />\n\n## Interoperability between LangChain.JS and LangSmith SDK\n\n### Tracing LangChain objects inside `traceable` (JS only)\n\nStarting with `langchain@0.2.x`, LangChain objects are traced automatically when used inside `@traceable` functions, inheriting the client, tags, metadata and project name of the traceable function.\n\nFor older versions of LangChain below `0.2.x`, you will need to manually pass an instance `LangChainTracer` created from the tracing context found in `@traceable`.",
      "language": "unknown"
    },
    {
      "code": "### Tracing LangChain child runs via `traceable` / RunTree API (JS only)\n\n<Note>\n  We're working on improving the interoperability between `traceable` and LangChain. The following limitations are present when using combining LangChain with `traceable`:\n\n  1. Mutating RunTree obtained from `getCurrentRunTree()` of the RunnableLambda context will result in a no-op.\n  2. It's discouraged to traverse the RunTree obtained from RunnableLambda via `getCurrentRunTree()` as it may not contain all the RunTree nodes.\n  3. Different child runs may have the same `execution_order` and `child_execution_order` value. Thus in extreme circumstances, some runs may end up in a different order, depending on the `start_time`.\n</Note>\n\nIn some uses cases, you might want to run `traceable` functions as part of the RunnableSequence or trace child runs of LangChain run imperatively via the `RunTree` API. Starting with LangSmith 0.1.39 and @langchain/core 0.2.18, you can directly invoke `traceable`-wrapped functions within RunnableLambda.",
      "language": "unknown"
    },
    {
      "code": "<img src=\"https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=7b117d3aa9b419fe2a314ec6d9cc7c16\" alt=\"Trace Tree\" data-og-width=\"2564\" width=\"2564\" data-og-height=\"1530\" height=\"1530\" data-path=\"langsmith/images/trace-tree-manual-tracing.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?w=280&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=517f8a525908d5241c0d635726bf2da7 280w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?w=560&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=2772298bff6569c12537d8b31cc90e78 560w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?w=840&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=4b02aa33df7ef1d18a33bb36c3e2edfe 840w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?w=1100&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=e9d4021c62cf3bad95e01c8aa2895d44 1100w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?w=1650&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=02ef49a98151ad9fc63c742241542d94 1650w, https://mintcdn.com/langchain-5e9cc07a/ImHGLQW1HnQYwnJV/langsmith/images/trace-tree-manual-tracing.png?w=2500&fit=max&auto=format&n=ImHGLQW1HnQYwnJV&q=85&s=765dabfe056ce5f28b1b09ca7eb735d7 2500w\" />\n\nAlternatively, you can convert LangChain's [`RunnableConfig`](https://reference.langchain.com/python/langchain_core/runnables/#langchain_core.runnables.RunnableConfig) to a equivalent RunTree object by using `RunTree.fromRunnableConfig` or pass the [`RunnableConfig`](https://reference.langchain.com/python/langchain_core/runnables/#langchain_core.runnables.RunnableConfig) as the first argument of `traceable`-wrapped function.\n\n<CodeGroup>",
      "language": "unknown"
    },
    {
      "code": "",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Interoperability between LangChain.JS and LangSmith SDK",
      "id": "interoperability-between-langchain.js-and-langsmith-sdk"
    },
    {
      "level": "h3",
      "text": "Tracing LangChain objects inside `traceable` (JS only)",
      "id": "tracing-langchain-objects-inside-`traceable`-(js-only)"
    },
    {
      "level": "h3",
      "text": "Tracing LangChain child runs via `traceable` / RunTree API (JS only)",
      "id": "tracing-langchain-child-runs-via-`traceable`-/-runtree-api-(js-only)"
    }
  ],
  "url": "llms-txt#the-above-chain-will-be-traced-as-a-child-run-of-the-traceable-function",
  "links": []
}