{
  "title": "Deploy with control plane",
  "content": "Source: https://docs.langchain.com/langsmith/deploy-with-control-plane\n\nThis guide shows you how to deploy your applications to [hybrid](/langsmith/hybrid) or [self-hosted](/langsmith/self-hosted) instances with a [control plane](/langsmith/control-plane). With a control plane, you build Docker images locally, push them to a registry that your Kubernetes cluster has access to, and deploy them with the [LangSmith UI](https://smith.langchain.com).\n\n<Note>\n  **This guide is for deploying applications, not setting up infrastructure.**\n\nBefore using this guide, you must have already completed infrastructure setup:\n\n* **[Hybrid setup](/langsmith/deploy-hybrid)**: For hybrid hosting.\n  * **[Enable LangSmith Deployment](/langsmith/deploy-self-hosted-full-platform)**: For self-hosted with control plane.\n\nIf you haven't set up your infrastructure yet, start with the [Platform setup section](/langsmith/platform-setup).\n</Note>\n\nApplications deployed to hybrid or self-hosted LangSmith instances with control plane use Docker images. In this guide, the application deployment workflow is:\n\n1. Test your application locally using `langgraph dev` or [Studio](/langsmith/studio).\n2. Build a Docker image using the `langgraph build` command.\n3. Push the image to a container registry accessible by your infrastructure.\n4. Deploy from the [control plane UI](/langsmith/control-plane#control-plane-ui) by specifying the image URL.\n\nBefore completing this guide, you'll need the following:\n\n* Completed infrastructure setup to enable your [data plane](/langsmith/data-plane) to receive application deployments:\n  * [Hybrid setup](/langsmith/deploy-hybrid): Installs data plane components (listener, operator, CRDs) in your Kubernetes cluster that connect to LangChain's managed control plane.\n  * [Enable LangSmith Deployment](/langsmith/deploy-self-hosted-full-platform): Enables LangSmith Deployment on your self-hosted LangSmith instance.\n* Access to the [LangSmith UI](https://smith.langchain.com) with LangSmith Deployment enabled.\n* A container registry accessible by your Kubernetes cluster. If using a private registry that requires authentication, you must configure image pull secrets as part of your infrastructure setup. Refer to [Private registry authentication](#private-registry-authentication).\n\n## Step 1. Test locally\n\nBefore deploying, test your application locally. You can use the [LangGraph CLI](/langsmith/cli#dev) to run an Agent server in development mode:\n\nFor a full guide local testing, refer to the [Local server quickstart](/langsmith/local-server).\n\n## Step 2. Build Docker image\n\nBuild a Docker image of your application using the [`langgraph build`](/langsmith/cli#build) command:\n\nBuild command options include:\n\n| Option               | Default          | Description                                                       |\n| -------------------- | ---------------- | ----------------------------------------------------------------- |\n| `-t, --tag TEXT`     | Required         | Tag for the Docker image                                          |\n| `--platform TEXT`    |                  | Target platform(s) to build for (e.g., `linux/amd64,linux/arm64`) |\n| `--pull / --no-pull` | `--pull`         | Build with latest remote Docker image                             |\n| `-c, --config FILE`  | `langgraph.json` | Path to configuration file                                        |\n\nExample with platform specification:\n\nFor full details, see the [CLI reference](/langsmith/cli#build).\n\n## Step 3. Push to container registry\n\nPush your image to a container registry accessible by your Kubernetes cluster. The specific commands depend on your registry provider.\n\n<Tip>\n  Tag your images with version information (e.g., `my-registry.com/my-app:v1.0.0`) to make rollbacks easier.\n</Tip>\n\n## Step 4. Deploy with the control plane UI\n\nThe [control plane UI](/langsmith/control-plane#control-plane-ui) allows you to create and manage deployments, view logs and metrics, and update configurations. To create a new deployment in the [LangSmith UI](https://smith.langchain.com):\n\n1. In the left-hand navigation panel, select **Deployments**.\n2. In the top-right corner, select **+ New Deployment**.\n3. In the deployment configuration panel, provide:\n   * **Image URL**: The full image URL you pushed in [Step 3](#step-3-push-to-container-registry).\n   * **Listener/Compute ID**: Select the listener configured for your infrastructure.\n   * **Namespace**: The Kubernetes namespace to deploy to.\n   * **Environment variables**: Any required configuration (API keys, etc.).\n   * Other deployment settings as needed.\n4. Select **Submit**.\n\nThe control plane will coordinate with your [data plane](/langsmith/data-plane) listener to deploy your application.\n\nAfter creating a deployment, the infrastructure is [provisioned asynchronously](/langsmith/control-plane#asynchronous-deployment). Deployment can take up to several minutes, with initial deployments taking longer due to database creation.\n\nFrom the control plane UI, you can view build logs, server logs, and deployment metrics including CPU/memory usage, replicas, and API performance. For more details, refer to the [control plane monitoring documentation](/langsmith/control-plane#monitoring).\n\n<Note>\n  A [LangSmith Observability tracing project](/langsmith/observability) is automatically created for each deployment with the same name as the deployment. Tracing environment variables are set automatically by the control plane.\n</Note>\n\nTo deploy a new version of your application, create a [new revision](/langsmith/control-plane#revisions):\n\nStarting from the LangSmith UI:\n\n1. In the left-hand navigation panel, select **Deployments**.\n2. Select an existing deployment.\n3. In the Deployment view, select **+ New Revision** in the top-right corner.\n4. Update the configuration:\n   * Update the **Image URL** to your new image version.\n   * Update environment variables if needed.\n   * Adjust other settings as needed.\n5. Select **Submit**.\n\n## Private registry authentication\n\nIf your container registry requires authentication (e.g., AWS ECR, Azure ACR, GCP Artifact Registry, private Docker registry), you must configure Kubernetes image pull secrets before deploying applications. This is a one-time infrastructure configuration.\n\n<Note>\n  **This configuration is done at the infrastructure level, not per-deployment.** Once configured, all deployments automatically inherit the registry credentials.\n</Note>\n\nThe configuration steps depend on your deployment type:\n\n* **Self-hosted with control plane**: Configure `imagePullSecrets` in your LangSmith Helm chart's `values.yaml` file. See the detailed steps in the [Enable LangSmith Deployment guide](/langsmith/deploy-self-hosted-full-platform#setup).\n* **Hybrid**: Configure `imagePullSecrets` in your `langgraph-dataplane-values.yaml` file using the same format.\n\nFor detailed steps on creating image pull secrets for different registry providers, refer to the [Kubernetes documentation on pulling images from private registries](https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/).\n\n* **[Control plane](/langsmith/control-plane)**: Learn more about control plane features.\n* **[Data plane](/langsmith/data-plane)**: Understand data plane architecture.\n* **[Observability](/langsmith/observability)**: Monitor your deployments with automatic tracing.\n* **[Studio](/langsmith/studio)**: Test and debug deployed applications.\n* **[LangGraph CLI](/langsmith/cli)**: Full CLI reference documentation.\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/deploy-with-control-plane.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "For a full guide local testing, refer to the [Local server quickstart](/langsmith/local-server).\n\n## Step 2. Build Docker image\n\nBuild a Docker image of your application using the [`langgraph build`](/langsmith/cli#build) command:",
      "language": "unknown"
    },
    {
      "code": "Build command options include:\n\n| Option               | Default          | Description                                                       |\n| -------------------- | ---------------- | ----------------------------------------------------------------- |\n| `-t, --tag TEXT`     | Required         | Tag for the Docker image                                          |\n| `--platform TEXT`    |                  | Target platform(s) to build for (e.g., `linux/amd64,linux/arm64`) |\n| `--pull / --no-pull` | `--pull`         | Build with latest remote Docker image                             |\n| `-c, --config FILE`  | `langgraph.json` | Path to configuration file                                        |\n\nExample with platform specification:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Overview",
      "id": "overview"
    },
    {
      "level": "h2",
      "text": "Prerequisites",
      "id": "prerequisites"
    },
    {
      "level": "h2",
      "text": "Step 1. Test locally",
      "id": "step-1.-test-locally"
    },
    {
      "level": "h2",
      "text": "Step 2. Build Docker image",
      "id": "step-2.-build-docker-image"
    },
    {
      "level": "h2",
      "text": "Step 3. Push to container registry",
      "id": "step-3.-push-to-container-registry"
    },
    {
      "level": "h2",
      "text": "Step 4. Deploy with the control plane UI",
      "id": "step-4.-deploy-with-the-control-plane-ui"
    },
    {
      "level": "h2",
      "text": "Update deployment",
      "id": "update-deployment"
    },
    {
      "level": "h2",
      "text": "Private registry authentication",
      "id": "private-registry-authentication"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    }
  ],
  "url": "llms-txt#deploy-with-control-plane",
  "links": []
}