{
  "title": "In your auth handler:",
  "content": "@auth.authenticate\nasync def authenticate(headers: dict) -> Auth.types.MinimalUserDict:\n    ...\n    return {\n        \"identity\": \"user-123\",\n        \"is_authenticated\": True,\n        \"permissions\": [\"threads:write\", \"threads:read\"]  # Define permissions in auth\n    }\n\ndef _default(ctx: Auth.types.AuthContext, value: dict):\n    metadata = value.setdefault(\"metadata\", {})\n    metadata[\"owner\"] = ctx.user.identity\n    return {\"owner\": ctx.user.identity}\n\n@auth.on.threads.create\nasync def create_thread(ctx: Auth.types.AuthContext, value: dict):\n    if \"threads:write\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"Unauthorized\"\n        )\n    return _default(ctx, value)\n\n@auth.on.threads.read\nasync def rbac_create(ctx: Auth.types.AuthContext, value: dict):\n    if \"threads:read\" not in ctx.permissions and \"threads:write\" not in ctx.permissions:\n        raise Auth.exceptions.HTTPException(\n            status_code=403,\n            detail=\"Unauthorized\"\n        )\n    return _default(ctx, value)\npython  theme={null}\n  @auth.on.threads.create\n  async def on_thread_create(\n  ctx: Auth.types.AuthContext,\n  value: Auth.types.on.threads.create.value  # Specific type for thread creation\n  ):\n  ...\n\n@auth.on.threads\n  async def on_threads(\n  ctx: Auth.types.AuthContext,\n  value: Auth.types.on.threads.value  # Union type of all thread actions\n  ):\n  ...\n\n@auth.on\n  async def on_all(\n  ctx: Auth.types.AuthContext,\n  value: dict  # Union type of all possible actions\n  ):\n  ...\n  ```\n\nMore specific handlers provide better type hints since they handle fewer action types.\n</Tip>\n\n<a id=\"supported-actions\" />\n\n#### Supported actions and types\n\nHere are all the supported action handlers:\n\n| Resource       | Handler                       | Description                | Value Type                                                                                                                       |\n| -------------- | ----------------------------- | -------------------------- | -------------------------------------------------------------------------------------------------------------------------------- |\n| **Threads**    | `@auth.on.threads.create`     | Thread creation            | [`ThreadsCreate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.ThreadsCreate)       |\n|                | `@auth.on.threads.read`       | Thread retrieval           | [`ThreadsRead`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.ThreadsRead)           |\n|                | `@auth.on.threads.update`     | Thread updates             | [`ThreadsUpdate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.ThreadsUpdate)       |\n|                | `@auth.on.threads.delete`     | Thread deletion            | [`ThreadsDelete`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.ThreadsDelete)       |\n|                | `@auth.on.threads.search`     | Listing threads            | [`ThreadsSearch`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.ThreadsSearch)       |\n|                | `@auth.on.threads.create_run` | Creating or updating a run | [`RunsCreate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.RunsCreate)             |\n| **Assistants** | `@auth.on.assistants.create`  | Assistant creation         | [`AssistantsCreate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.AssistantsCreate) |\n|                | `@auth.on.assistants.read`    | Assistant retrieval        | [`AssistantsRead`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.AssistantsRead)     |\n|                | `@auth.on.assistants.update`  | Assistant updates          | [`AssistantsUpdate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.AssistantsUpdate) |\n|                | `@auth.on.assistants.delete`  | Assistant deletion         | [`AssistantsDelete`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.AssistantsDelete) |\n|                | `@auth.on.assistants.search`  | Listing assistants         | [`AssistantsSearch`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.AssistantsSearch) |\n| **Crons**      | `@auth.on.crons.create`       | Cron job creation          | [`CronsCreate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.CronsCreate)           |\n|                | `@auth.on.crons.read`         | Cron job retrieval         | [`CronsRead`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.CronsRead)               |\n|                | `@auth.on.crons.update`       | Cron job updates           | [`CronsUpdate`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.CronsUpdate)           |\n|                | `@auth.on.crons.delete`       | Cron job deletion          | [`CronsDelete`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.CronsDelete)           |\n|                | `@auth.on.crons.search`       | Listing cron jobs          | [`CronsSearch`](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.auth.types.CronsSearch)           |\n\n<Note>\n  \"About Runs\"\n\nRuns are scoped to their parent thread for access control. This means permissions are typically inherited from the thread, reflecting the conversational nature of the data model. All run operations (reading, listing) except creation are controlled by the thread's handlers.\n  There is a specific `create_run` handler for creating new runs because it had more arguments that you can view in the handler.\n</Note>\n\nFor implementation details:\n\n* Check out the introductory tutorial on [setting up authentication](/langsmith/set-up-custom-auth)\n* See the how-to guide on implementing a [custom auth handlers](/langsmith/custom-auth)\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit this page on GitHub](https://github.com/langchain-ai/docs/edit/main/src/langsmith/auth.mdx) or [file an issue](https://github.com/langchain-ai/docs/issues/new/choose).\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "code_samples": [
    {
      "code": "## Supported resources\n\nLangGraph provides three levels of authorization handlers, from most general to most specific:\n\n1. **Global Handler** (`@auth.on`): Matches all resources and actions\n2. **Resource Handler** (e.g., `@auth.on.threads`, `@auth.on.assistants`, `@auth.on.crons`): Matches all actions for a specific resource\n3. **Action Handler** (e.g., `@auth.on.threads.create`, `@auth.on.threads.read`): Matches a specific action on a specific resource\n\nThe most specific matching handler will be used. For example, `@auth.on.threads.create` takes precedence over `@auth.on.threads` for thread creation.\nIf a more specific handler is registered, the more general handler will not be called for that resource and action.\n\n<Tip>\n  \"Type Safety\"\n  Each handler has type hints available for its `value` parameter at `Auth.types.on.<resource>.<action>.value`. For example:",
      "language": "unknown"
    }
  ],
  "headings": [
    {
      "level": "h2",
      "text": "Supported resources",
      "id": "supported-resources"
    },
    {
      "level": "h2",
      "text": "Next steps",
      "id": "next-steps"
    }
  ],
  "url": "llms-txt#in-your-auth-handler:",
  "links": []
}